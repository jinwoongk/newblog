<!doctype html>
<html lang="ko" dir="ltr" class="blog-wrapper blog-tags-post-list-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.18">
<link rel="alternate" type="application/rss+xml" href="/rss.xml" title="Act as a catalyst RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Act as a catalyst Atom Feed">
<link rel="alternate" type="application/json" href="/feed.json" title="Act as a catalyst JSON Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-4ZT898XDT2","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-4ZT898XDT2"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-4ZT898XDT2",{anonymize_ip:!0})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Cloud Catalyst" href="/opensearch.xml">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4362752107119680" crossorigin="anonymous"></script><title data-rh="true">&quot;Mesh&quot; íƒœê·¸ë¡œ ì—°ê²°ëœ 3ê°œ ê²Œì‹œë¬¼ê°œì˜ ê²Œì‹œë¬¼ì´ ìˆìŠµë‹ˆë‹¤. | Cloud Catalyst</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://ddii.dev/tags/mesh"><meta data-rh="true" name="docusaurus_locale" content="ko"><meta data-rh="true" name="docsearch:language" content="ko"><meta data-rh="true" name="naver-site-verification" content="cbcc03783e5594725d3951f4e7f16ede80e69881"><meta data-rh="true" property="og:title" content="&quot;Mesh&quot; íƒœê·¸ë¡œ ì—°ê²°ëœ 3ê°œ ê²Œì‹œë¬¼ê°œì˜ ê²Œì‹œë¬¼ì´ ìˆìŠµë‹ˆë‹¤. | Cloud Catalyst"><meta data-rh="true" name="docusaurus_tag" content="blog_tags_posts"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_tags_posts"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://ddii.dev/tags/mesh"><link data-rh="true" rel="alternate" href="https://ddii.dev/tags/mesh" hreflang="ko"><link data-rh="true" rel="alternate" href="https://ddii.dev/tags/mesh" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://J5EMWGFKQM-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.1e7a31ee.css">
<link rel="preload" href="/assets/js/runtime~main.13cb0e78.js" as="script">
<link rel="preload" href="/assets/js/main.5e59ad0e.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">ë³¸ë¬¸ìœ¼ë¡œ ê±´ë„ˆë›°ê¸°</a></div><nav class="navbar navbar--fixed-top navbarHideable_ObN2"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo_transparent.svg" alt="Cloud Catalyst" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo_transparent.svg" alt="Cloud Catalyst" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Cloud Catalyst</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Posts</a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" docid="intro" href="/docs/intro">Docs</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/intro">Intro</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/tags">Tags</a><a class="navbar__item navbar__link" href="/presentation">Presentation</a><a class="navbar__item navbar__link" href="/archive">Archive</a><a class="navbar__item navbar__link" href="/about">About</a><a class="navbar__item navbar__link" href="/pang4u">Pang4u</a><a href="https://github.com/ddiiwoong/newblog" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_S7eR colorModeToggle_vKtC"><button class="clean-btn toggleButton_rCf9 toggleButtonDisabled_Pu9x" type="button" disabled="" title="ì–´ë‘ìš´ ëª¨ë“œì™€ ë°ì€ ëª¨ë“œ ì „í™˜í•˜ê¸° (í˜„ì¬ ë°ì€ ëª¨ë“œ)" aria-label="ì–´ë‘ìš´ ëª¨ë“œì™€ ë°ì€ ëª¨ë“œ ì „í™˜í•˜ê¸° (í˜„ì¬ ë°ì€ ëª¨ë“œ)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_qEbK"><button type="button" class="DocSearch DocSearch-Button" aria-label="ê²€ìƒ‰"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">ê²€ìƒ‰</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_a9qW thin-scrollbar" aria-label="ìµœê·¼ ë¸”ë¡œê·¸ ë¬¸ì„œ ë‘˜ëŸ¬ë³´ê¸°"><div class="sidebarItemTitle_uKok margin-bottom--md">ìµœê·¼ ê²Œì‹œë¬¼</div><ul class="sidebarItemList_Kvuv"><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/2022/03/18/eks-anywhere-adv">EKS Anywhere Advanced Usages</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/2022/03/06/eks-anywhere">EKS Anywhere on vSphere Homelab</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/2022/02/05/what-is-tailscale">What is Tailscale?</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/2021/06/11/synology-prometheus">Synology monitoring with Prometheus and snmp exporter</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/2020/12/06/vSphere-with-Tanzu-homelab-2">vSphere with Tanzu homelab running on ASUS PN50 (2/2)</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><header class="margin-bottom--xl"><h1>&quot;Mesh&quot; íƒœê·¸ë¡œ ì—°ê²°ëœ 3ê°œ ê²Œì‹œë¬¼ê°œì˜ ê²Œì‹œë¬¼ì´ ìˆìŠµë‹ˆë‹¤.</h1><a href="/tags">ëª¨ë“  íƒœê·¸ ë³´ê¸°</a></header><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_rzP5" itemprop="headline"><a itemprop="url" href="/2019/02/28/knative-using-gloo">Knative with Gloo</a></h2><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2019-02-28T00:00:00.000Z" itemprop="datePublished">2019ë…„ 2ì›” 28ì¼</time> Â· <!-- -->ì•½ 9ë¶„</div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="knative-routing">Knative Routing<a class="hash-link" href="#knative-routing" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h2><p>KnativeëŠ” ì•ì—ì„œë„ ëª‡ë²ˆ ì–¸ê¸‰í•˜ì˜€ì§€ë§Œ ê¸°ë³¸ì ìœ¼ë¡œ <code>Routing</code>ì„ ì‚¬ìš©í•˜ì—¬ ì™¸ë¶€ì— ë…¸ì¶œí•  ì„œë¹„ìŠ¤ë“¤ì— ëŒ€í•œ HTTP Endpointë¥¼ ì œê³µí•œë‹¤. ì–´ë–»ê²Œ ë³´ë©´ ê¸°ë³¸ì ìœ¼ë¡œ API Gateway ì—­í• ì„ í•˜ê¸°ë„ í•˜ê³  Ingress ì—­í• ì„ í•˜ê¸°ë„ í•œë‹¤. ë³´í†µ Service meshì¸ <code>Istio</code>ë¥¼ ì‚¬ìš©í•˜ì—¬ ingressë¥¼ êµ¬í˜„í•˜ëŠ”ê²ƒì´ ë‹¹ì—°í•˜ë‹¤ê³  ìƒê°í•˜ê¸°ë„ í•˜ì§€ë§Œ Istioì˜ ëª¨ë“  ê¸°ëŠ¥ì´ Knativeì— í•„ìš”í•˜ì§€ëŠ” ì•Šê³  ì„¤ì¹˜ë˜ëŠ”ê²ƒ ìì²´ê°€ ë¦¬ì†ŒìŠ¤ ì†Œëª¨ê°€ ê½¤ ëœë‹¤ëŠ”ê²ƒì€ ì„¤ì¹˜ í•´ë³¸ì‚¬ëŒì€ ì•Œê³  ìˆì„ê²ƒì´ë‹¤. </p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="service">Service<a class="hash-link" href="#service" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="kubernetes">Kubernetes<a class="hash-link" href="#kubernetes" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h3><p><img loading="lazy" src="https://www.nginx.com/wp-content/uploads/2017/09/NGINX-Plus-Features-Kubernetes-Ingress-Controller-644x372@2x.png" alt="ingress" class="img_E7b_"><br>
<!-- -->ì´ë¯¸ì§€ì¶œì²˜ : <a href="https://www.nginx.com/blog/announcing-nginx-ingress-controller-for-kubernetes-release-1-3-0/" target="_blank" rel="noopener noreferrer">https://www.nginx.com/blog/announcing-nginx-ingress-controller-for-kubernetes-release-1-3-0/</a></p><p>Kubernetesì—ì„œëŠ” ì¼ë°˜ì ìœ¼ë¡œ ì„œë¹„ìŠ¤ ì ‘ì†ì„ êµ¬í˜„í•˜ê²Œ ë˜ë©´ ê¸°ë³¸ì ìœ¼ë¡œ Podì™€ Serviceë¥¼ ìƒì„±í•˜ê³  Ingressë¥¼ ì‚¬ìš©í•˜ì—¬ í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ë¡œ ë“¤ì–´ì˜¤ëŠ” íŠ¸ë˜í”½ì„ ì²˜ë¦¬í•˜ê²Œ ëœë‹¤.</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="knative">Knative<a class="hash-link" href="#knative" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h3><p><img loading="lazy" src="https://i1.wp.com/blog.openshift.com/wp-content/uploads/intro.png?w=499&amp;ssl=1" alt="Serving" class="img_E7b_"><br>
<!-- -->ì´ë¯¸ì§€ì¶œì²˜ : <a href="https://blog.openshift.com/knative-serving-your-serverless-services/" target="_blank" rel="noopener noreferrer">https://blog.openshift.com/knative-serving-your-serverless-services/</a></p><p>Knativeì—ì„œëŠ” ì•ì„  Knative ê´€ë ¨ í¬ìŠ¤íŒ…ì—ì„œë„ ì„¤ëª…í–ˆë“¯ì´ <code>Automatic scaling up and down to zero</code> íŠ¹ì„±ì„ ê°€ì§€ê³  ìˆê¸°ì— Podê°€ ìµœì´ˆ ì‹¤í–‰ë˜ì–´ìˆì§€ ì•Šì€ ìƒíƒœì—ì„œ íŠ¸ë˜í”½ì´ ë“¤ì–´ì˜¤ê²Œ ë˜ë©´ <a href="https://github.com/knative/serving/blob/master/docs/scaling/DEVELOPMENT.md" target="_blank" rel="noopener noreferrer">Knative Serving Activator</a>ì— ì˜í•´ì„œ Podê°€ ì—†ëŠ” Revisionì„ í™•ì¸í•˜ê³  Cold Start í˜•íƒœë¡œ í”„ë¡œë¹„ì €ë‹í•˜ê²Œ ëœë‹¤. ë‚˜ëŠ” ì´ê²Œ ì§„ì •í•œ ì„œë²„ë¦¬ìŠ¤ë¼ê³  ìƒê°í•˜ì§€ë§Œ ì£¼ë³€ì— ë°˜ë°•í•˜ì‹œëŠ” ë¶„ë“¤ë„ ê°„í˜¹ ìˆë‹¤.</p><p>ì´í›„ Podê°€ Warm ìƒíƒœê°€ ë˜ê³  ë‚˜ë©´ Istio Route(Ingress Gateway)ë¥¼ í†µí•´ íŠ¸ë˜í”½ì´ Podë¡œ ì „ë‹¬ë˜ì–´ í†µì‹ ì´ ì´ë¤„ì§€ê²Œ ëœë‹¤.</p><p>í˜„ì¬ KnativeëŠ” í˜„ì¬ Ingress Gateway ì˜ì¡´ì„±ì„ ê°€ì§€ê³  ìˆê³  Envoyê¸°ë°˜ Service Meshì¸ <code>Istio</code>, Envoyê¸°ë°˜ API Gatewayì¸ <code>Gloo</code> ë‘ê°€ì§€ ì˜µì…˜ìœ¼ë¡œ Ingress êµ¬í˜„ì´ ê°€ëŠ¥í•˜ë‹¤.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="istio">Istio<a class="hash-link" href="#istio" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h2><p>KnativeëŠ” ê¸°ë³¸ì ìœ¼ë¡œ Ingress Gatewayê¸°ëŠ¥ì„ íƒ‘ì¬í•˜ê³  ìˆëŠ”ë° ì´ëŠ” Istioì˜ ê¸°ëŠ¥ì¤‘ í•˜ë‚˜ë‹¤.<br>
<!-- -->IstioëŠ” ë‹¤ìŒê³¼ ê°™ì€ Core Featureë¥¼ ê°€ì§„ë‹¤. ìƒì„¸í•œ ë‚´ìš©ì€ <a href="https://istio.io/docs/concepts/what-is-istio/" target="_blank" rel="noopener noreferrer">https://istio.io/docs/concepts/what-is-istio/</a> ì—ì„œ í™•ì¸í•˜ë©´ ëœë‹¤.</p><ul><li>Traffic management</li><li>Security</li><li>Policies and Telemetry</li><li>Performance and Scalability</li></ul><p>IstioëŠ” 48ê°œì˜ <code>CRDs</code>(CustomResourceDefinition objects)ë¥¼ ê°€ì§€ê³  ìˆëŠ”ë° ì´ì¤‘ Knative Servingì—ì„œ ì‚¬ìš©í•˜ëŠ”ê±´ <code>VirtualService</code> ë‹¨ í•˜ë‚˜ë‹¤.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="gloo">Gloo<a class="hash-link" href="#gloo" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h2><p><a href="https://gloo.solo.io/" target="_blank" rel="noopener noreferrer">Gloo</a>ëŠ” Kubernetes-native ingress controllerì´ì <a href="https://medium.com/solo-io/announcing-gloo-the-function-gateway-3f0860ef6600" target="_blank" rel="noopener noreferrer">Next Generation API Gateway</a> ë¥¼ ìœ„í•´ ì‹œì‘ëœ í”„ë¡œì íŠ¸ì´ë‹¤. ì‹¤ì œ Redhatì—ì„œ Openshiftê¸°ë°˜ Microservice ë° Istio ê°œë°œì—…ë¬´ë¥¼ í•˜ë‹¤ê°€ ìµœê·¼ì— solo.ioì˜ CTOë¡œ ì´ì§í•œ <a href="https://blog.christianposta.com/" target="_blank" rel="noopener noreferrer">Christian Posta</a>ê°€ ë°€ê³  ìˆëŠ” í”„ë¡œì íŠ¸ì´ê¸°ë„ í•˜ë‹¤. </p><p><img loading="lazy" src="https://cdn-images-1.medium.com/max/1600/0*Z0Jb5DJFOyeY91sN." alt="gloo" class="img_E7b_"></p><p><code>Gloo</code>ëŠ” Envoy Proxy ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•˜ë©°
ê¸°ì¡´ Legacyë¶€í„° Containerì„œë¹„ìŠ¤, FaaS(AWS Lambda, Azure Functions, GCP Functions)ì˜ì—­ì˜ Applicationë“¤ì„ REST, gRPC, SOAP, Web Sockerê¸°ë°˜ìœ¼ë¡œ Aggregate í•´ì„œ Function ê¸°ë°˜ ì¶”ìƒí™”ë¥¼ êµ¬í˜„í•´ ì£¼ëŠ” ì˜¤í”ˆì†ŒìŠ¤ í”„ë¡œì íŠ¸ë¼ ì •ì˜ í•  ìˆ˜ ìˆë‹¤. </p><p>Istioì˜ Ingressê¸°ëŠ¥ì™¸ì˜ ì—¬ëŸ¬ê°€ì§€ ë¶€ê°€ ê¸°ëŠ¥(Telemetry, Security, Policy Enforcement)ë“¤ì€ Knativeì—ì„œëŠ” í•„ìš”ë¡œ í•˜ì§€ ì•ŠëŠ”ë‹¤. </p><p>Knative API Gateway ë¡œì„œ Istioê°€ ì•„ë‹Œ Glooê°€ ì¡°ê¸ˆë” ê²½ëŸ‰í™”ëœ ëŒ€ì•ˆìœ¼ë¡œ ê²°ì •ë˜ì—ˆê³  Glooë¥¼ í†µí•´ Knative ì„¤ì¹˜ê°€ ê°€ëŠ¥í•˜ê²Œ ë˜ì—ˆë‹¤. ë‹¨, Knative Eventing ì»´í¬ë„ŒíŠ¸ëŠ” í˜„ì¬ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤ê³  í•œë‹¤. </p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="install-knative-with-gloo">Install Knative with Gloo<a class="hash-link" href="#install-knative-with-gloo" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h2><p>ì°¸ê³ : <a href="https://github.com/knative/docs/blob/master/install/Knative-with-Gloo.md" target="_blank" rel="noopener noreferrer">Install with Gloo</a></p><p>ê°„ë‹¨í•˜ê²Œ glooì™€ Knative ì„¤ì¹˜ë¥¼ í•´ë³´ì.</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="requirements">Requirements<a class="hash-link" href="#requirements" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h3><ul><li>Kubernetes cluster v1.11 or newer </li><li>Enable <a href="https://kubernetes.io/docs/reference/access-authn-authz/admission-controllers/#how-do-i-turn-on-an-admission-controller" target="_blank" rel="noopener noreferrer">MutatingAdmissionWebhook admission controller</a></li><li>kubectl v1.10 or newer</li><li>Bash in Mac or Linux</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="install-glooctl">Install Glooctl<a class="hash-link" href="#install-glooctl" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h3><p>gloo CLI (glooctl) Download<br>
<a href="https://github.com/solo-io/gloo/releases" target="_blank" rel="noopener noreferrer">https://github.com/solo-io/gloo/releases</a></p><p>ë˜ëŠ” ì§ì ‘ Download</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl -sL https://run.solo.io/gloo/install | sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Attempting to download glooctl version v0.8.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Downloading glooctl-darwin-amd64...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Download complete!, validating checksum...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Checksum valid.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Gloo was successfully installed ğŸ‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Add the gloo CLI to your path with:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  export PATH=$HOME/.gloo/bin:$PATH</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Now run:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  glooctl install gateway     # install gloo&#x27;s function gateway functionality into the &#x27;gloo-system&#x27; namespace</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  glooctl install ingress     # install very basic Kubernetes Ingress support with Gloo into namespace gloo-system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  glooctl install knative     # install Knative serving with Gloo configured as the default cluster ingress</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Please see visit the Gloo Installation guides for more:  https://gloo.solo.io/installation/</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" title="ë³µì‚¬" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>PATH ë“±ë¡</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ export PATH=$HOME/.gloo/bin:$PATH</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" title="ë³µì‚¬" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>gloo CLI í™•ì¸</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ glooctl --version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">glooctl version 0.8.1</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" title="ë³µì‚¬" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>GCP ë¬´ë£Œí”Œëœìœ¼ë¡œ 3-node í´ëŸ¬ìŠ¤í„°ë¥¼ ìƒì„±í•œë‹¤.</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ gcloud container clusters create gloo \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --region=asia-east1-a \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --cluster-version=latest \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --machine-type=n1-standard-2 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --enable-autorepair \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --num-nodes=3</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" title="ë³µì‚¬" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>cluster ìƒì„±ëœê²ƒì„ í™•ì¸í•˜ê³  cluster-admin ê¶Œí•œì„ í• ë‹¹í•œë‹¤.</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get nodes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                                  STATUS    ROLES     AGE       VERSION</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gke-gloo-default-pool-f6bcc479-f8v9   Ready     &lt;none&gt;    9m        v1.11.7-gke.6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gke-gloo-default-pool-f6bcc479-fl78   Ready     &lt;none&gt;    9m        v1.11.7-gke.6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gke-gloo-default-pool-f6bcc479-gfgw   Ready     &lt;none&gt;    9m        v1.11.7-gke.6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl create clusterrolebinding cluster-admin-binding \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt;   --clusterrole=cluster-admin \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt;   --user=$(gcloud config get-value core/account)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Your active configuration is: [cloudshell-25974]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clusterrolebinding.rbac.authorization.k8s.io &quot;cluster-admin-binding&quot; created</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" title="ë³µì‚¬" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>Glooì™€ Knative ì„¤ì¹˜ë¥¼ í•œë‹¤. ë¯¸ë¦¬ <code>glooctl install knative --dry-run</code> ìœ¼ë¡œ ì „ì²´ manifestë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤. </p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ glooctl install knative</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" title="ë³µì‚¬" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>ìœ„ì—ì„œ ì„¤ì¹˜ ê³¼ì •ì€ ìƒëµí–ˆì§€ë§Œ Istioì— ë¹„í•´ CRD ê°œìˆ˜ê°€ ì ì€ ê²ƒì„ ì•Œìˆ˜ìˆë‹¤. ë˜í•œ ì„¤ì¹˜ëœ ì»´í¬ë„ŒíŠ¸ ì—­ì‹œ Istioì— ë¹„í•´ì„œ ê°„ì†Œí™”ëœ ê²ƒì„ ì•Œìˆ˜ ìˆë‹¤. </p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get pods --namespace gloo-system                                                                                         </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                                   READY     STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clusteringress-proxy-59fd6fb56-dmwwm   1/1       Running   0          7m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">discovery-779884d4cc-xlql2             1/1       Running   6          7m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gloo-844fc79445-f4zvg                  1/1       Running   6          7m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ingress-7d75c99874-s4m76               1/1       Running   6          7m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get pods --namespace knative-serving</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                          READY     STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">activator-746f6bb684-49tfh    1/1       Running   0          12m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">autoscaler-955f679cd-tx5vw    1/1       Running   0          12m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">controller-7fc84c6584-jbn69   1/1       Running   0          12m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">webhook-7797ffb6bf-6pgsw      1/1       Running   0          12m</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" title="ë³µì‚¬" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>ì´ì „ í¬ìŠ¤íŒ…ì—ì„œë„ ì‚¬ìš©í–ˆë˜ <code>gcr.io/knative-sample/helloworld-go</code> ì´ë¯¸ì§€ë¥¼ í™œìš©í•˜ì—¬ ìƒ˜í”Œì•± Knative Serviceë¥¼ ë§Œë“ ë‹¤.</p><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="serviceyaml">service.yaml<a class="hash-link" href="#serviceyaml" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h4><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ vi service.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: serving.knative.dev/v1alpha1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: helloworld-go</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  namespace: default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  runLatest:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    configuration:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      revisionTemplate:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          container:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            image: gcr.io/knative-sample/helloworld-go</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            env:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              - name: TARGET</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                value: &quot;Go Sample v1&quot;</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" title="ë³µì‚¬" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl apply --filename service.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">service.serving.knative.dev &quot;helloworld-go&quot; created</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" title="ë³µì‚¬" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>ì•ì—ì„œë„ ì„¤ëª…í–ˆì§€ë§Œ <code>Automatic scaling up and down to zero</code> ìœ¼ë¡œ Cold Startê°€ ë˜ê³  ì ì‹œí›„ì— ì•„ë˜ì™€ ê°™ì´ Knative Serviceë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤. </p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get ksvc helloworld-go -n default  --output=custom-columns=NAME:.metadata.name,DOMAIN:.status.domain]($ kubectl get ksvc helloworld-go -n default  --output=custom-columns=NAME:.metadata.name,DOMAIN:.status.d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">omain</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME            DOMAIN</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helloworld-go   helloworld-go.default.example.com</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" title="ë³µì‚¬" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>Gloo Ingressë¥¼ í™•ì¸í•œë‹¤. GKEì—ì„œ ì„¤ì¹˜í–ˆê¸° ë•Œë¬¸ì— ìë™ìœ¼ë¡œ LoadBalancerê°€ ì—°ë™ë˜ì–´ ìˆëŠ”ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. </p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get svc -n gloo-system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                   TYPE           CLUSTER-IP     EXTERNAL-IP   PORT(S)                      AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clusteringress-proxy   LoadBalancer   10.3.244.54    34.**.**.54   80:30978/TCP,443:32448/TCP   39m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gloo                   ClusterIP      10.3.243.231   &lt;none&gt;        9977/TCP                     39m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ glooctl proxy url --name clusteringress-proxy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">http://34.**.**.54:80</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" title="ë³µì‚¬" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>ìœ„ì—ì„œ ì–»ì€ ë‘ê°€ì§€ ì •ë³´ë¡œ ìƒì„±ëœ appì„ í…ŒìŠ¤íŠ¸í•œë‹¤. Cold Start(default timeout 5ë¶„) ë•Œë¬¸ì— ì‘ë‹µì´ ëŠ¦ì–´ì§ˆ ìˆ˜ë„ ìˆì§€ë§Œ ì ì‹œ ê¸°ë‹¤ë¦¬ë©´ ì‘ë‹µì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl -H &quot;Host: helloworld-go.default.example.com&quot; http://34.**.**.54:80</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Hello Go Sample v1!</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" title="ë³µì‚¬" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>ë¬¼ë¡  <code>Revision</code>ì´ë‚˜ <code>Route</code>ë¥¼ í™œìš©í•˜ì—¬ Knativeì˜ ê¸°ëŠ¥ì— ëŒ€í•´ì„œë„ í™•ì¸ì´ ê°€ëŠ¥í•˜ë‹¤.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="ì •ë¦¬">ì •ë¦¬<a class="hash-link" href="#ì •ë¦¬" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h2><p>GlooëŠ” Knative ClusterIngress CRDë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•˜ëŠ” Istioì˜ ëŒ€ì•ˆìœ¼ë¡œì„œ ê°€ëŠ¥ì„±ì„ ë³´ì—¬ì£¼ê³  ìˆë‹¤. ì´ì™¸ì—ë„ The Service Mesh Orchestration Platform <code>SuperGloo</code>, Debugger for microservices <code>Squash</code> ë“± ë‹¤ì–‘í•œ Mesh Layerê¸°ë°˜ì˜ ì˜¤í”ˆì†ŒìŠ¤ë“¤ì„ í™•ì¸í• ìˆ˜ ìˆë‹¤. ë˜ë‹¤ë¥¸ ìŠ¤ì³ì§€ë‚˜ê°ˆìˆ˜ë„ ìˆëŠ” ì˜¤í”ˆì†ŒìŠ¤ì¼ìˆ˜ë„ ìˆê² ì§€ë§Œ í˜„ì¬ ê°œë°œë˜ëŠ” ë¡œë“œë§µ(<a href="https://www.solo.io/)%EC%9D%84" target="_blank" rel="noopener noreferrer">https://www.solo.io/)ì„</a> ë³´ë©´ Knativeê°€ ê³ ë„í™”ë˜ëŠ” ì—¬ì •ì— ê°™ì´ ê°€ëŠ” ëª¨ìŠµì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. </p><p>next-generation API Gatewayë¡œì„œ ë‹¤ì–‘í•œ í”„ë¡œí† ì½œì„ ì§€ì›í•˜ê¸° ë•Œë¬¸ì— (HTTP1, HTTP2, gRPC, REST/OpenAPISpec, SOAP, WebSockets, Lambda/Cloud Functions) ë”ìš±ë” Microservices ë° Serverless Workloadë¥¼ ìˆ˜í–‰í•˜ê¸°ì— ë”ìš± ì í•©í•œ ì˜¤í”ˆì†ŒìŠ¤ë¡œ ë³´ì¸ë‹¤. </p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="ë‹¤ìŒ-ì£¼ì œ">ë‹¤ìŒ ì£¼ì œ<a class="hash-link" href="#ë‹¤ìŒ-ì£¼ì œ" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h2><p>í˜„ì¬ í•´ë³´ê³  ì‹¶ì€ê²ƒì€ ë² ì–´ë©”íƒˆ Kubernetes Clusterê¸°ë°˜ BGPë¡œ ë™ì‘í•˜ëŠ” <a href="https://metallb.universe.tf/" target="_blank" rel="noopener noreferrer">MetalLB</a>ë‚˜ <a href="https://cilium.io/try-eks/" target="_blank" rel="noopener noreferrer">Cillium on AWS</a> ì¸ë° ì‹œê°„ë‚˜ëŠ” ëŒ€ë¡œ í…ŒìŠ¤íŠ¸ í•´ë´ì•¼ ê² ë‹¤.</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>íƒœê·¸:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/tags/knative">Knative</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/tags/kubernetes">Kubernetes</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/tags/faa-s">FaaS</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/tags/serverless">Serverless</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/tags/cr-ds">CRDs</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/tags/cloud-events">CloudEvents</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/tags/mesh">Mesh</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/tags/gloo">Gloo</a></li></ul></div><div class="col text--right col--3"><a aria-label="Knative with Gloo ì— ëŒ€í•´ ë” ì½ì–´ë³´ê¸°" href="/2019/02/28/knative-using-gloo"><b>ìì„¸íˆ ë³´ê¸°</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_rzP5" itemprop="headline"><a itemprop="url" href="/2019/02/18/knative-knctl">Knative CLI - knctl</a></h2><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2019-02-18T00:00:00.000Z" itemprop="datePublished">2019ë…„ 2ì›” 18ì¼</time> Â· <!-- -->ì•½ 15ë¶„</div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="knctl">knctl<a class="hash-link" href="#knctl" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h2><p><code>knctl</code> ì€ Knative CLI íˆ´ë¡œ ê°„ë‹¨í•˜ê²Œ knative clusterë¥¼ ë§Œë“¤ê³  Knativeë¥¼ ì¶”ìƒí™”í•´ì„œ ì•±ê¹Œì§€ ë°°í¬í•  ìˆ˜ ìˆëŠ” ì˜¤í”ˆì†ŒìŠ¤ì´ë‹¤. </p><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="ì°¸ê³ ">ì°¸ê³ <a class="hash-link" href="#ì°¸ê³ " title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h4><ul><li><a href="https://github.com/cppforlife/knctl" target="_blank" rel="noopener noreferrer">https://github.com/cppforlife/knctl</a>  </li><li><a href="https://developer.ibm.com/blogs/2018/11/12/knctl-a-simpler-way-to-work-with-knative/" target="_blank" rel="noopener noreferrer">https://developer.ibm.com/blogs/2018/11/12/knctl-a-simpler-way-to-work-with-knative/</a>  </li><li><a href="https://starkandwayne.com/blog/public-traffic-into-knative-on-gke/" target="_blank" rel="noopener noreferrer">https://starkandwayne.com/blog/public-traffic-into-knative-on-gke/</a></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="knative-ë‹¤ì‹œ-ì‚´í´ë³´ê¸°">Knative ë‹¤ì‹œ ì‚´í´ë³´ê¸°<a class="hash-link" href="#knative-ë‹¤ì‹œ-ì‚´í´ë³´ê¸°" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h3><p><a href="https://ddii.dev/kubernetes/knative/" target="_blank" rel="noopener noreferrer">ì•ì„  í¬ìŠ¤íŒ…ì—ì„œë„ ì´ì•¼ê¸°</a> í–ˆì§€ë§Œ ê¸°ì¡´ FaaS(AWS Lambda, Google Cloud Funtions, Azure Function) ê³¼ëŠ” ë‹¤ë¥¸ Serverless ê°œë…ìœ¼ë¡œ ë°›ì•„ë“¤ì–´ì•¼ í•œë‹¤.</p><p>ë‹¤ì‹œ í•œë²ˆ íŠ¹ì§•ì„ ë‚˜ì—´í•´ë³´ë©´ ì•„ë˜ì™€ ê°™ë‹¤.</p><ul><li>Serverless Containerì˜ ì‹ ì†í•œ ë°°ì¹˜ </li><li>Automatic scaling up and down to zero</li><li>Istioë¥¼ ë°±ì—”ë“œë¡œ í™œìš©í•˜ì—¬ Routing êµ¬í˜„</li><li>ë°°í¬ ëœ ì½”ë“œ ë° configì˜ íŠ¹ì • ì‹œì  ìŠ¤ëƒ… ìƒ·</li></ul><p>ê·¸ë¦¬ê³  ë‹¤ìŒê³¼ ê°™ì€ CRDs(Custom Resource Definitions)ë¡œ êµ¬ì„±ëœ ì˜¤ë¸Œì íŠ¸ë“¤ë¡œ ì •ì˜ëœë‹¤.</p><ul><li><code>Route</code>ëŠ” ì‚¬ìš©ì ì„œë¹„ìŠ¤ì— ëŒ€í•œ HTTP endpointì™€ Routingì„ ì œê³µí•œë‹¤.</li><li><code>Revisions</code>ì€ code(function)ì™€ configë¡œ êµ¬ì„±ëœ ë¶ˆë³€ì˜ ìŠ¤ëƒ…ìƒ·. Routeë¥¼ í†µí•´ endpointë¥¼ í• ë‹¹ë°›ì§€ ëª»í•œ Revisionì€ ìë™ìœ¼ë¡œ kubernetes resourceì—ì„œ ì‚­ì œë¨</li><li><code>Configuration</code>ì€ ìš”êµ¬ë˜ëŠ” Revision ìµœì‹  ìƒíƒœë¥¼ ê¸°ë¡í•˜ê³  ìƒì„±í•˜ê³  ì¶”ì í• ìˆ˜ ìˆìŒ. ì†ŒìŠ¤ íŒ¨í‚¤ì§€(git repoë‚˜ archive)ë¥¼ ì»¨í…Œì´ë„ˆë¡œ ë³€í™˜í•˜ê¸° ìœ„í•œ ë‚´ìš©ì´ë‚˜ ë©”íƒ€ë°ì´í„°ë“±ì„ í¬í•¨ì‹œí‚¬ìˆ˜ ìˆìŒ. </li><li><code>Service</code>ëŠ” <code>Routes</code>ì™€ <code>Configurations</code> ë¦¬ì†ŒìŠ¤ì˜ ì¶”ìƒí™”ëœ ì§‘í•©ì²´. ëª¨ë“  ì›Œí¬ë¡œë“œì˜ lifecycleì„ ê´€ë¦¬í•¨. íŠ¸ë˜í”½ì„ í•­ìƒ ìµœì‹ ì˜ Revisionìœ¼ë¡œ routeë˜ë„ë¡ ì •ì˜í• ìˆ˜ ìˆìŒ</li></ul><p>í•˜ë‚˜ì”© ì¡°ê¸ˆ ìì„¸íˆ ì´ì•¼ê¸° í•˜ë©´ ì•„ë˜ì²˜ëŸ¼ ì •ë¦¬ í• ìˆ˜ ìˆë‹¤.</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="route">Route<a class="hash-link" href="#route" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h3><p><strong>Route</strong>ëŠ” ì‚¬ìš©ì ì„œë¹„ìŠ¤(Codeì™€ Configurationì˜ Revisionì •ë³´)ì˜ ë„¤íŠ¸ì›Œí¬ Endpointë¥¼ ì œê³µí•œë‹¤. kubernetes namespaceëŠ” ì—¬ëŸ¬ê°œì˜ <code>Route</code>ë¥¼ ê°€ì§ˆìˆ˜ ìˆë‹¤. <code>Route</code>ëŠ” í•˜ë‚˜ ì´ìƒì˜ <code>Revisions</code>ì„ ê°€ì§€ë©´ì„œ ìˆ˜ëª…ì´ ê¸¸ê³  ì•ˆì •ì ì¸ HTTP Endpointë¥¼ ì œê³µí•œë‹¤. ê¸°ë³¸êµ¬ì„±ì€ <code>Route</code> ê°ì²´ê°€ <code>Configuration</code>ì— ì˜í•´ ìƒì„±ëœ ìµœì‹ ì˜ Revisionìœ¼ë¡œ íŠ¸ë˜í”½ì„ ìë™ìœ¼ë¡œ ì§€ì •í•œë‹¤. ì¡°ê¸ˆë” ë³µì¡í•œ ê²½ìš°ë¡œëŠ” istioì˜ ê¸°ëŠ¥ì„ í™œìš©í•˜ì—¬ íŠ¸ë˜í”½ì„ ë°±ë¶„ìœ¨ ê¸°ì¤€ìœ¼ë¡œ <code>Route</code>ë¥¼ ì§€ì •í•  ìˆ˜ ìˆë‹¤. </p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="revision">Revision<a class="hash-link" href="#revision" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h3><p><strong>Revision</strong>ì€ Codeì™€ Configurationì˜ ë¶ˆë³€ì˜ ìŠ¤ëƒ…ìƒ·ì´ë‹¤. í•˜ë‚˜ì˜ <code>Revision</code>ì€ ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ë¥¼ ì°¸ì¡°í•˜ê³  ì„ íƒì ìœ¼ë¡œ <code>Build</code>ë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆë‹¤. <code>Revision</code>ì€ <strong>Configuration</strong>ì´ ì—…ë°ì´íŠ¸ ì‹œ ìƒì„±ëœë‹¤.<br>
<code>Route</code>ë¥¼ í†µí•´ httpì£¼ì†Œ ì§€ì •ì´ ë¶ˆê°€ëŠ¥í•œ <code>Revision</code>ì€ íê¸° ë˜ê³  ê´€ë ¨ëœ kubernetes ë¦¬ì†ŒìŠ¤ê°€ ì‚­ì œê°€ ëœë‹¤. ì‹œê°„ì´ ì§€ë‚¨ì— ë”°ë¼ <code>Configuration</code>ì´ ìƒì„±í•œ <code>Revision</code> íˆìŠ¤í† ë¦¬ê°€ ì œê³µë˜ê³  ì‚¬ìš©ìëŠ” ì´ì „ <code>Revision</code>ë¡œ ì‰½ê²Œ ë¡¤ë°± í•  ìˆ˜ ìˆë‹¤.  </p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="configuration">Configuration<a class="hash-link" href="#configuration" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h3><p><code>Configuration</code>ì€ ìµœì‹ ì˜ <code>Revision</code>ìƒíƒœë¥¼ ì„¤ëª…í•˜ê³ , ìƒì„±í•˜ê³ , ì›í•˜ëŠ” ìƒíƒœê°€ ê°±ì‹ ë ë•Œ <code>Revision</code>ì˜ ìƒíƒœë¥¼ ì¶”ì í•œë‹¤. <code>Configuration</code>ì€ <code>Build</code>ë¥¼ ì°¸ì¡°í•˜ì—¬ ì†ŒìŠ¤(git repo ë˜ëŠ” archive)ë¥¼ ì»¨í…Œì´ë„ˆë¡œ ë³€í™˜í•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ê°€ì´ë“œê°€ í¬í•¨ë˜ì–´ ìˆê±°ë‚˜ ë‹¨ìˆœíˆ ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ ë° ìˆ˜ì •ì—ì„œ í•„ìš”í•œ ë©”íƒ€ ë°ì´í„° ë§Œ ì°¸ì¡° í•  ìˆ˜ ìˆë‹¤. </p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="product-integration">Product Integration<a class="hash-link" href="#product-integration" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h3><p>2019ë…„ 2ì›” í˜„ì¬ 0.3ì´ ë¦´ë¦¬ìŠ¤ë˜ê³  ìˆê³  ë²Œì¨ ì—¬ëŸ¬ ì œí’ˆì— í†µí•©ì´ ë˜ê³  ìˆë‹¤. </p><p>ìµœê·¼ IBMthink 2019ì—ì„œ Managed Knative (Experimental)ë¥¼ ë‚´ë†“ê¸°ë„ í•˜ì˜€ë‹¤.<br>
<a href="https://www.ibm.com/blogs/bluemix/2019/02/announcing-managed-knative-on-ibm-cloud-kubernetes-service-experimental/" target="_blank" rel="noopener noreferrer">https://www.ibm.com/blogs/bluemix/2019/02/announcing-managed-knative-on-ibm-cloud-kubernetes-service-experimental/</a> </p><p>Istioë¥¼ í¬í•¨í•œ Knative ë§ˆì €ë„ í’ˆëŠ” ëª¨ìŠµìœ¼ë¡œ managed kubernetes ì˜ì—­ì—ì„œ ê¸€ë¡œë²Œ í”Œë ˆì´ì–´ë“¤ ëª¨ë‘ ì„œë¡œ ì¹˜ê³ ë‚˜ê°€ëŠ” ëª¨ìŠµë“¤ì„ ë³¼ìˆ˜ ìˆë‹¤. </p><p>ì‘ë…„ 11ì›”ì—ëŠ” Gitlab ì œí’ˆì•ˆì— serverlessë¼ëŠ” extensioní˜•íƒœì˜ ì„œë¹„ìŠ¤ê°€ ì¶”ê°€ ë˜ê¸°ë„ í•˜ì˜€ê³ ,<br>
<a href="https://about.gitlab.com/press/releases/2018-12-11-gitlab-and-triggermesh-announce-gitlab-serverless.html" target="_blank" rel="noopener noreferrer">https://about.gitlab.com/press/releases/2018-12-11-gitlab-and-triggermesh-announce-gitlab-serverless.html</a></p><p>triggermesh ë¼ëŠ” ê³³ì—ì„œëŠ” serverless management platformì´ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ knative ê¸°ë°˜ ë©€í‹° ì„œë²„ë¦¬ìŠ¤ í”Œë«í¼ì„ ì¶œì‹œí•˜ê¸°ë„ í•˜ì˜€ë‹¤.<br>
<a href="https://triggermesh.com/serverless_management_platform/" target="_blank" rel="noopener noreferrer">https://triggermesh.com/serverless_management_platform/</a></p><p>Pivotal Function Service (PFS), Google GKE SERVERLESS ADD-ON ë“±ì€ ì•„ì§ early access ì‹ ì²­ë§Œ ë°›ê³  ìˆëŠ” ìƒíƒœì´ë‹¤.</p><p>ì˜¤ëŠ˜ì€ ê°„ë‹¨í•˜ê²Œ ë°°í¬í• ìˆ˜ ìˆëŠ” íˆ´ knctlê³¼ ê´€ë ¨ use-caseë¥¼ ì†Œê°œí•˜ê³ ì í•œë‹¤.</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="kubernetes-cluster-ìƒì„±">Kubernetes Cluster ìƒì„±<a class="hash-link" href="#kubernetes-cluster-ìƒì„±" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h3><p>ì¼ë‹¨ GKE Free tierì—ì„œ Clusterë¥¼ í•˜ë‚˜ ìƒì„±í•˜ì.</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">gcloud container clusters create knative \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --region=asia-east1-a \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --cluster-version=latest \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --machine-type=n1-standard-2 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --enable-autoscaling --min-nodes=1 --max-nodes=5 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --enable-autorepair \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --scopes=service-control,service-management,compute-rw,storage-ro,cloud-platform,logging-write,monitoring-write,pubsub,datastore \  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --num-nodes=3</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" title="ë³µì‚¬" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>cluster ìƒì„±ëœê²ƒì„ í™•ì¸í•˜ê³  cluster-admin ê¶Œí•œì„ í• ë‹¹í•œë‹¤. </p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get nodes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                                     STATUS    ROLES     AGE       VERSION</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gke-knative-default-pool-d1a39347-5m5t   Ready     &lt;none&gt;    1m        v1.11.7-gke.4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gke-knative-default-pool-d1a39347-l6zh   Ready     &lt;none&gt;    1m        v1.11.7-gke.4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gke-knative-default-pool-d1a39347-qv5r   Ready     &lt;none&gt;    1m        v1.11.7-gke.4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl create clusterrolebinding cluster-admin-binding \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --clusterrole=cluster-admin \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --user=$(gcloud config get-value core/account)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Your active configuration is: [cloudshell-4728]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clusterrolebinding.rbac.authorization.k8s.io &quot;cluster-admin-binding&quot; created</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" title="ë³µì‚¬" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="knctl-ì„¤ì¹˜">knctl ì„¤ì¹˜<a class="hash-link" href="#knctl-ì„¤ì¹˜" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h2><p>ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” Mac OS ì„¤ì¹˜ ê¸°ì¤€ìœ¼ë¡œ ì‘ì„±í•˜ì˜€ë‹¤.</p><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="homebrew-ì„¤ì¹˜">homebrew ì„¤ì¹˜<a class="hash-link" href="#homebrew-ì„¤ì¹˜" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h4><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">brew install starkandwayne/kubernetes/knctl</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" title="ë³µì‚¬" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="binary">binary<a class="hash-link" href="#binary" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h4><p><a href="https://github.com/cppforlife/knctl/releases" target="_blank" rel="noopener noreferrer">https://github.com/cppforlife/knctl/releases</a> </p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ wget https://github.com/cppforlife/knctl/releases/download/v0.1.0/knctl-darwin-amd64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ mv knctl-* /usr/local/bin/knctl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ chmod +x /usr/local/bin/knctl</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" title="ë³µì‚¬" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="knctl-ë¡œ-knative-ë°°í¬">knctl ë¡œ Knative ë°°í¬<a class="hash-link" href="#knctl-ë¡œ-knative-ë°°í¬" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h2><p>ì„¤ì¹˜í•œ knctlë¡œ Knative ë°°í¬ë¥¼ ì§„í–‰í•œë‹¤. ì„¤ì¹˜ë˜ëŠ” ë‚´ìš©ì„ ì§€ì¼œë³´ê³  ìˆìœ¼ë©´ <code>istio</code>ë¥¼ ë¨¼ì € ë°°í¬í•˜ê³  ê·¸ë‹¤ìŒì— <code>Knative</code>ë¥¼ ì„¤ì¹˜í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ë°°í¬ë˜ëŠ” ëª¨ë“ˆë“¤ì˜ ìƒíƒœë¥¼ í•˜ë‚˜í•˜ë‚˜ ì²´í¬í•´ì„œ ë°°í¬í•˜ê¸° ë•Œë¬¸ì— ì„¤ì¹˜ìƒì— ê³¼ì •ë“¤ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. </p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ knctl install --exclude-monitoring</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" title="ë³µì‚¬" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ namespace <code>hello-test</code>ë¥¼ ìƒì„±í•œë‹¤.</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl create namespace hello-test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace &quot;hello-test&quot; created</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" title="ë³µì‚¬" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>knctl deploy ëª…ë ¹ìœ¼ë¡œ ìµœì´ˆ revisionì„ ë°°í¬í•œë‹¤.<br>
<!-- -->ì•„ë˜ ê²°ê³¼ë¥¼ ë³´ë©´ hello-00001 ì´ë¼ê³  í•˜ëŠ” ìµœì´ˆì˜ revisionì„ ì‘ì„±í•˜ê¸° ë•Œë¬¸ì— <code>latest</code> tagë¥¼ ë‹¬ê³  ë°°í¬ë¥¼ í•˜ê²Œ ëœë‹¤. </p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ knctl deploy \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      --namespace hello-test \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      --service hello \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      --image gcr.io/knative-samples/helloworld-go \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      --env TARGET=Rev1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Name  hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Waiting for new revision to be created...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Tagging new revision &#x27;hello-00001&#x27; as &#x27;latest&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Tagging new revision &#x27;hello-00001&#x27; as &#x27;previous&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Annotating new revision &#x27;hello-00001&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Waiting for new revision &#x27;hello-00001&#x27; to be ready for up to 5m0s (logs below)...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hello-00001 &gt; hello-00001-deployment-5cdbfc9bc9-hks6t | 2019/02/17 22:27:50 Hello world sample started.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Revision &#x27;hello-00001&#x27; became ready</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Continuing to watch logs for 5s before exiting</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Succeeded</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" title="ë³µì‚¬" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get svc knative-ingressgateway -n istio-system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                     TYPE           CLUSTER-IP      EXTERNAL-IP    PORT(S)                                                                                                                   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">knative-ingressgateway   LoadBalancer   10.63.253.209   34.***.***.248   80:32380/TCP,443:32390/TCP,31400:32400/TCP,15011:30082/TCP,8060:31125/TCP,853:32009/TCP,15030:31102/TCP,15031:31631/TCP   6h</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" title="ë³µì‚¬" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>ìœ„ì²˜ëŸ¼ Knativeê°€ í”„ë¡œë¹„ì €ë‹ ë˜ë©´ì„œ ingress-gatewayê°€ í•˜ë‚˜ ìƒì„±ì´ ë˜ì–´ìˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆê³  knctlë¡œë„ ingressë¥¼ í™•ì¸ì´ ê°€ëŠ¥í•˜ë‹¤.</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ knctl ingress list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Ingresses</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Name                    Addresses     Ports  Age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">knative-ingressgateway  34.***.***.248  80     6h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                        443</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                        31400</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                        15011</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                        8060</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                        853</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                        15030</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                        15031</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 ingresses</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Succeeded</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" title="ë³µì‚¬" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="knative-custom-domain-ì—°ê²°">Knative custom domain ì—°ê²°<a class="hash-link" href="#knative-custom-domain-ì—°ê²°" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h2><p>Domainì´ ë³„ë„ë¡œ ì—†ê¸° ë•Œë¬¸ì— KnativeëŠ” ë‚´ë¶€ì ìœ¼ë¡œ example.comì´ë¼ê³  í•˜ëŠ” ê¸°ë³¸ domainì„ ì‚¬ìš©í•œë‹¤. ê·¸ë˜ì„œ ì‹¤ì œ <code>knctl curl</code> ëª…ë ¹ì€ ë‚´ë¶€ì ìœ¼ë¡œ <code>hello.hello-test.example.com</code>ìœ¼ë¡œ curlì„ ì‹¤í–‰í•˜ê²Œ ë˜ê³  í•´ë‹¹ ê²°ê³¼ë¥¼ ì•„ë˜ì™€ ê°™ì´ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ knctl curl --service hello -n hello-test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Running: curl &#x27;-sS&#x27; &#x27;-H&#x27; &#x27;Host: hello.hello-test.example.com&#x27; &#x27;http://34.***.***.248:80&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Hello Rev1!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Succeeded</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" title="ë³µì‚¬" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>kubernetes nodeê°€ 3ê°œì´ë¯€ë¡œ 3ê°œì˜ podê°€ ìƒì„±ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ì¼ì •ì‹œê°„(default:5ë¶„)ì´ ì§€ë‚˜ë©´ <code>zero to scale</code> ê´€ì ì—ì„œ podê°€ ì¢…ë£Œë˜ë¯€ë¡œ ë‹¤ì‹œ í™•ì¸í• ë•ŒëŠ” ë‹¤ì‹œ curl ëª…ë ¹ì„ ë‚ ë¦¬ê²Œ ë˜ë©´ ë‹¤ì‹œ podê°€ ì˜¬ë¼ì˜¤ê²Œ ëœë‹¤. í•´ë‹¹ ê°œë…ì€ FaaSë˜ëŠ” AWS Lambdaì—ì„œ Cold-Startì™€ ë™ì¼í•œ ê²ƒì´ë¼ ë³¼ ìˆ˜ ìˆë‹¤.  </p><p>AWS Cold Start ì°¸ê³  : <a href="https://novemberde.github.io/aws/2018/02/02/Lambda_coldStart.html" target="_blank" rel="noopener noreferrer">https://novemberde.github.io/aws/2018/02/02/Lambda_coldStart.html</a></p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get po</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                                      READY     STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hello-00001-deployment-5cdbfc9bc9-hks6t   3/3       Running   0          4m</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" title="ë³µì‚¬" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>ê°€ì§€ê³  ìˆëŠ” ë„ë©”ì¸ì´ ìˆë‹¤ë©´ ìœ„ì—ì„œ ë‚˜ì˜¨ <code>34.***.***.248</code> IPë¥¼ domainì— ë§¤í•‘í•´ë³´ì.
ì•„ë˜ì—ì„œëŠ” ê¸°ì¡´ ë³´ìœ ì¤‘ì¸ skcloud.io ë„ë©”ì¸ì„ ì—°ê²°í•˜ì˜€ë‹¤.</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ dig knative.skcloud.io</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">;; ANSWER SECTION:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">knative.skcloud.io.     603     IN      A       34.***.***.248</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" title="ë³µì‚¬" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>knctl domainì„ ì´ìš©í•˜ì—¬ default domainì„ <code>knative.skcloud.io</code>ë¡œ ë³€ê²½í•œë‹¤.</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ knctl domain create -d knative.skcloud.io --default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Succeeded</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" title="ë³µì‚¬" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>knctl routes ëª…ë ¹ìœ¼ë¡œ í•´ë‹¹ hello-test appì˜ Endpoint ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ knctl routes list -n hello-test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Routes in namespace &#x27;hello-test&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Name   Domain                               Traffic        Annotations  Conditions  Age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hello  hello.hello-test.knative.skcloud.io  100% -&gt; hello  -            3 OK / 3    1h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 routes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Succeeded</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" title="ë³µì‚¬" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>5ë¶„ì´ìƒ ê¸°ë‹¤ë ¸ë‹¤ê°€ curlë¡œ í™•ì¸í•˜ë©´ Cold-Start ë˜ëŠ” ì‹œê°„(ëª‡ì´ˆ) ì§€ì—°ì´ ë°œìƒí•˜ê³  ê²°ê³¼ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
ì´í›„ì—ëŠ” ë°”ë¡œ ì‘ë‹µì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. </p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl http://hello.hello-test.knative.skcloud.io/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Hello Rev1!</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" title="ë³µì‚¬" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="revision-ì¶”ê°€">revision ì¶”ê°€<a class="hash-link" href="#revision-ì¶”ê°€" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h2><p>ì´ë²ˆì—ëŠ” revisionì„ ì¶”ê°€í•´ë³´ì. TARGET environment ë³€ìˆ˜ë¥¼ <code>Rev2</code>ë¡œ ìˆ˜ì •í•˜ê³  ë°°í¬ë¥¼ í•œë‹¤.
ê¸°ì¡´ hello-00002 revisionì´ ìµœì‹  revisionìœ¼ë¡œ ê°±ì‹ ë˜ì–´ ë°°í¬ê°€ ë˜ëŠ”ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ knctl deploy --service hello \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --image gcr.io/knative-samples/helloworld-go \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --env TARGET=Rev2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Name  hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Waiting for new revision (after revision &#x27;hello-00001&#x27;) to be created...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Tagging new revision &#x27;hello-00002&#x27; as &#x27;latest&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Tagging older revision &#x27;hello-00001&#x27; as &#x27;previous&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Annotating new revision &#x27;hello-00002&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Waiting for new revision &#x27;hello-00002&#x27; to be ready for up to 5m0s (logs below)...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hello-00002 &gt; hello-00002-deployment-6cf86bbfc7-sblz9 | 2019/02/17 23:25:43 Hello world sample started.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Revision &#x27;hello-00002&#x27; became ready</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Continuing to watch logs for 5s before exiting</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Succeeded</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" title="ë³µì‚¬" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>ì‹ ê·œ <code>revision</code> ì„œë¹„ìŠ¤ë¥¼ ì¶”ê°€ëœê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ë§ˆì°¬ê°€ì§€ë¡œ ëª‡ì´ˆê°„ì˜ Cold-Start delayê°€ ë°œìƒí•  ìˆ˜ë„ ìˆë‹¤. </p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl http://hello.hello-test.knative.skcloud.io/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Hello Rev2!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ knctl curl --service hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Running: curl &#x27;-sS&#x27; &#x27;-H&#x27; &#x27;Host: hello.hello-test.knative.skcloud.io&#x27; &#x27;http://34.***.***.248:80&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Hello Rev2!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Succeeded</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" title="ë³µì‚¬" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>revision listë¥¼ í™•ì¸í•´ë³´ë©´ í˜„ì¬ latest, previous TAGì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ knctl revision list --service hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Revisions for service &#x27;hello&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Name         Tags      Annotations  Conditions  Age  Traffic</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hello-00002  latest    -            1 OK / 4    14m  100% -&gt; hello.hello-test.knative.skcloud.io</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hello-00001  previous  -            1 OK / 4    4h   -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2 revisions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Succeeded</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" title="ë³µì‚¬" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bluegreen-ë°°í¬">Blue/Green ë°°í¬<a class="hash-link" href="#bluegreen-ë°°í¬" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h2><p>Blue/Green DeployëŠ” knctl rollout ëª…ë ¹ìœ¼ë¡œ ìˆ˜í–‰í• ìˆ˜ ìˆë‹¤.<br>
<!-- -->rollout í• ë•Œ <code>--managed-route=false</code> ì˜µì…˜ì„ ì¤˜ì•¼ íŠ¹ì • ë¹„ìœ¨ë¡œ routingì´ ê°€ëŠ¥í•˜ë‹¤.<br>
<!-- -->ì•„ë˜ ì˜ˆì‹œëŠ” TARGET environment ë³€ìˆ˜ë¥¼ <code>blue</code>, <code>green</code>ìœ¼ë¡œ ë°”ê¿”ê°€ë©´ì„œ ë°°í¬ë¥¼ ì§„í–‰í•˜ì˜€ë‹¤.</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ knctl deploy --service hello \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --image gcr.io/knative-samples/helloworld-go \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --env TARGET=blue \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --managed-route=false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Name  hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Waiting for new revision (after revision &#x27;hello-00002&#x27;) to be created...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Tagging new revision &#x27;hello-00003&#x27; as &#x27;latest&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Tagging older revision &#x27;hello-00002&#x27; as &#x27;previous&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Annotating new revision &#x27;hello-00003&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Waiting for new revision &#x27;hello-00003&#x27; to be ready for up to 5m0s (logs below)...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Revision &#x27;hello-00003&#x27; became ready</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Continuing to watch logs for 5s before exiting</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hello-00003 &gt; hello-00003-deployment-99478dcc5-jf267 | 2019/02/17 23:48:20 Hello world sample started.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Succeeded</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" title="ë³µì‚¬" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>revision listë¥¼ í™•ì¸í•˜ë©´ ì•„ë˜ì™€ ê°™ì´ <code>latest</code>ë¡œ Traffic ì „ì²´ê°€ routing ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ knctl revision list --service hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Revisions for service &#x27;hello&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Name         Tags      Annotations  Conditions  Age  Traffic</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hello-00005  latest    -            4 OK / 4    44s  100% -&gt; hello.hello-test.knative.skcloud.io</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hello-00004  previous  -            4 OK / 4    2m   -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hello-00003  -         -            1 OK / 4    5m   -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hello-00002  -         -            1 OK / 4    28m  -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hello-00001  -         -            1 OK / 4    4h   -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">5 revisions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Succeeded</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" title="ë³µì‚¬" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>ì´í›„ì— rolloutì„ í†µí•´ previousë¡œ 90%, latestë¡œ 10%ë¡œ ë³€ê²½ì„ í•˜ë©´ ì¦‰ì‹œ ë°˜ì˜ì´ ë˜ê³  ì‹¤ì œ íŠ¸ë˜í”½ë„ ë¶„ì‚°ë˜ì–´ ë“¤ì–´ì˜¨ë‹¤. %ê°€ ë‚®ì€ ìª½ìœ¼ë¡œ routingì´ ë  ê²½ìš° Cold-Startê°€ ë°œìƒí•˜ê²Œ ë˜ë©´ delayëŠ” ë°œìƒí•˜ê²Œ ëœë‹¤.</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ knctl rollout --route hello -p hello:latest=10% -p hello:previous=90%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Succeeded</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ knctl revision list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Revisions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Service  Name         Tags      Annotations  Conditions  Age  Traffic</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hello    hello-00005  latest    -            2 OK / 4    1h   10% -&gt; hello.hello-test.knative.skcloud.io</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">~        hello-00004  previous  -            2 OK / 4    1h   90% -&gt; hello.hello-test.knative.skcloud.io</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">~        hello-00003  -         -            1 OK / 4    1h   -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">~        hello-00002  -         -            1 OK / 4    1h   -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">~        hello-00001  -         -            1 OK / 4    5h   -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">5 revisions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Succeeded</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" title="ë³µì‚¬" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>ê°„ë‹¨í•˜ê²Œ curl ë°˜ë³µë¬¸ì„ ì‘ì„±í•˜ì—¬ ëŒë ¤ë³´ì. </p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">#!/bin/sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">while true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl -sS --max-time 3 http://hello.hello-test.knative.skcloud.io/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">done</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" title="ë³µì‚¬" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>ê°„ë‹¨í•˜ê²Œ ìœ„ shì„ ëŒë¦¬ë©´ ì•„ë˜ì™€ ê°™ì´ Cold-Start delayê°€ ë°œìƒí• ë•Œ time outì´ ë°œìƒí•˜ê³  ì´í›„ green revisionìœ¼ë¡œ ì ‘ì†ì´ ë˜ëŠ”ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤. </p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ ./test.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl: (28) Operation timed out after 3002 milliseconds with 0 bytes received</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Hello blue!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Hello blue!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Hello blue!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Hello blue!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Hello blue!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl: (28) Operation timed out after 3003 milliseconds with 0 bytes received</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Hello blue!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Hello blue!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Hello blue!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Hello blue!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Hello blue!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Hello blue!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Hello green!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Hello blue!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Hello blue!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Hello blue!</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" title="ë³µì‚¬" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="ì •ë¦¬">ì •ë¦¬<a class="hash-link" href="#ì •ë¦¬" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h2><p>ì§€ê¸ˆê¹Œì§€ <code>knctl</code>ì„ ì‚¬ìš©í•˜ì—¬ ê°„ë‹¨í•˜ê²Œ knativeë¥¼ ë°°í¬í•˜ê³  custom domainì„ ì—°ê²°í•˜ì—¬ blue-green ë°°í¬ê¹Œì§€ í•´ë´¤ë‹¤.
ì´ì™¸ì—ë„ Knative Buildë¥¼ í™œìš©í•˜ì—¬ Docker image ì‘ì—…ì„ í•˜ê±°ë‚˜ ì„œë¹„ìŠ¤ ì¹´íƒˆë¡œê·¸ ë“±ì„ ì—°ë™í•˜ì—¬ ì™¸ë¶€ DBaaSë¥¼ ì—°ë™í•˜ëŠ” use-caseë“±ì„ ì°¾ì•„ë³¼ìˆ˜ ìˆë‹¤.</p><p>ì•„ì§ ì´ˆê¸° ë‹¨ê³„ì´ì§€ë§Œ KnativeëŠ” istioì™€ í•¨ê»˜ IBM, Google, Pivotalë“± global playerë“¤ì˜ ì°¨ì„¸ëŒ€ ì˜¤í”ˆì†ŒìŠ¤ë¡œ ë¶€ìƒí•˜ê³  ìˆë‹¤ê³  ë³¼ ìˆ˜ ìˆë‹¤.  </p><p><code>Zero to scale</code> ì´ë¼ëŠ” ìŠ¬ë¡œê±´ì•„ë˜ Serverless, FaaS ì‚¬ìƒì„ ê¸°ë°˜ìœ¼ë¡œ build, serving, event, routingì´ë¼ê³  í•˜ëŠ” Cloud Computing ì¶”ìƒí™”ì˜ ëíŒìœ¼ë¡œ ì§„í™”í•˜ê³  ìˆë‹¤. ì•ìœ¼ë¡œ ì–´ë–¤ ëª¨ìŠµìœ¼ë¡œ ì§„í™”ë ì§€ ê¶ê¸ˆí•˜ê³  ë‹¤ìŒë²ˆì—ëŠ” MQë‚˜ Pub/subë¥¼ ì—°ë™í•˜ê±°ë‚˜ ë©€í‹° í´ë¼ìš°ë“œ í™˜ê²½ì—ì„œ ë™ì‘í•˜ëŠ” ëª¨ìŠµì„ ë³´ì—¬ì£¼ëŠ” ê²ƒë„ ì¢‹ì„ê²ƒ ê°™ë‹¤. í¬ë§ì‚¬í•­ì´ì§€ë§Œ ì˜¬í•´ OpenInfraDayë‚˜ Kubernetes Day Korea í–‰ì‚¬ì—ì„œ Hands-onì„ ì§„í–‰í•´ë³´ëŠ”ê²ƒë„ ì¢‹ì§€ ì•Šì„ê¹Œ?</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>íƒœê·¸:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/tags/knative">Knative</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/tags/kubernetes">Kubernetes</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/tags/faa-s">FaaS</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/tags/serverless">Serverless</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/tags/cr-ds">CRDs</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/tags/cloud-events">CloudEvents</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/tags/mesh">Mesh</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/tags/knctl">knctl</a></li></ul></div><div class="col text--right col--3"><a aria-label="Knative CLI - knctl ì— ëŒ€í•´ ë” ì½ì–´ë³´ê¸°" href="/2019/02/18/knative-knctl"><b>ìì„¸íˆ ë³´ê¸°</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_rzP5" itemprop="headline"><a itemprop="url" href="/2018/08/01/knative">knative</a></h2><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2018-08-01T00:00:00.000Z" itemprop="datePublished">2018ë…„ 8ì›” 1ì¼</time> Â· <!-- -->ì•½ 9ë¶„</div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="knative">Knative<a class="hash-link" href="#knative" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h2><p>ë¯¸ì¹œë†ˆë“¤ ëª¨ì—¬ì„œ ë¯¸ì¹œê²ƒì„ ë§Œë“¤ì—ˆêµ°.. ã…ã…
ì˜ˆìƒí–ˆë˜ ë‚´ìš©ë“¤ì„ í˜„ì‹¤ë¡œ ë§Œë“œëŠ” í´ë¼ìŠ¤</p><p>Kubernetes ê´€ë ¨ ë¹„ì§€ë‹ˆìŠ¤ë¥¼ í•˜ê³  ìˆëŠ” ì…ì¥ì—ì„œ ë´ë„ ë†€ë„ì¼ì´ì§€ë§Œ
ì¸í”„ë¼ ì˜ì—­ë¶€í„° ê°œë°œì ì˜ì—­ê¹Œì§€ ëª¨ë‘ë¥¼ ì¶”ìƒí™”ì‹œí‚¤ëŠ” í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œì˜ í˜ì´ë€ ì°¸ ëŒ€ë‹¨í•˜ë‹¤.</p><p>ì˜¤ëŠ˜ì€ knativeì—ì„œ ì£¼ìš”ê¸°ëŠ¥ë“¤ì„ ë‘˜ëŸ¬ë³´ê³ ì í•œë‹¤.</p><p>ê°œì¸ì ì¸ ìƒê°ì€ Kubernetes ì§„ì˜ì´ë¼ê³  í•´ì•¼í•˜ë‚˜ CNCF ì§„ì˜ì´ë¼ê³  í•´ì•¼í•˜ë‚˜..
ê·¸ë™ì•ˆ ë…¸ë˜ë¥¼ ë¶€ë¥´ê³  ì£¼ëª©í–ˆë˜ CRDs, Operators, Serverless Workload, CloudEvents, Mesh Layer ê°œë…ê³¼ ì˜ì—­ì„ í¡ìˆ˜í•´ì„œ ê·¸ ê¸°ë°˜ìœ¼ë¡œ í™•ì¥ì‹œí‚¤ê³  ìˆë‹¤. </p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f https://storage.googleapis.com/knative-releases/serving/latest/release.yaml</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" title="ë³µì‚¬" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>ìœ„ ì½”ë“œ ë‚´ìš©ì„ ìƒì„¸í•˜ê²Œ ë³´ê³ ìˆì§€ë§Œ ë‹´ì€ê²ƒë“¤ì´ ì •ë§ ë§ë‹¤. ê·¸ë˜ë„ ë‹¤ ì´í•´í•˜ë ¤ë©´ í•˜ë‚˜í•˜ë‚˜ ì±™ê²¨ë´ì•¼ í•œë‹¤.</p><p>ì˜¤ëŠ˜ì€ ì¼ë‹¨ ì½”ì–´ ê¸°ëŠ¥ë§Œ ì‚´í´ë³¸ë‹¤.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="build">Build<a class="hash-link" href="#build" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h2><p><code>build</code>ëŠ” Knativeì˜ ì£¼ìš” <code>custom resource</code>ì´ê³  ì´ë¥¼ ì´ìš©í•˜ì—¬ fetch, build, packageë¥¼ ìˆ˜í–‰í•œë‹¤. repoì˜ ì†ŒìŠ¤ë¥¼ ë¹Œë“œí•˜ê³  ì»¨í…Œì´ë„ˆë¡œ ì´ë¯¸ì§€ë¡œ ë§Œë“¤ê³  ê·¸ë‹¤ìŒì— Knative <code>Serving</code>ìœ¼ë¡œ ë³´ë‚¸ë‹¤ê³  í•œë‹¤. </p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="build-ìš©ì–´">Build ìš©ì–´<a class="hash-link" href="#build-ìš©ì–´" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h3><ul><li><code>Build</code>ëŠ” ì—¬ëŸ¬ <code>steps</code>ì„ í¬í•¨í•˜ê³  <code>Builder</code>ë¡œ êµ¬ì²´í™”ëœë‹¤</li><li><code>Builder</code>ëŠ” ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ ìœ í˜•</li><li><code>Build</code>ë‚´ <code>steps</code>ì€ repositoryì— pushë¥¼ í•  ìˆ˜ ìˆìŒ</li><li><code>BuildTemplate</code> ëŠ” ì¬í™œìš©ê°€ëŠ¥í•œ í…œí”Œë¦¿</li><li><code>Build</code>ë‚´ <code>source</code>ëŠ” kubernetes Volumeìœ¼ë¡œ mountë˜ëŠ” ë°ì´í„°ë¥¼ ì •ì˜í• ìˆ˜ ìˆê³  git, Google Cloud Storage, ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ë¥¼ ì§€ì›í•¨.</li><li>kubernetes Secretì„ ì‚¬ìš©í•˜ì—¬ <code>ServiceAccount</code>ë¡œ ì¸ì¦í•¨</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="serving">Serving<a class="hash-link" href="#serving" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h2><p>Knative <code>Serving</code>ì€ Kubernetesì™€ Istioë¥¼ ê¸°ë°˜ìœ¼ë¡œ Serverless Workloadê°€ í´ëŸ¬ìŠ¤í„°ì—ì„œ ì‘ë™í•˜ëŠ” ë°©ì‹ì„ ì •ì˜í•˜ê³  ì œì–´í•˜ëŠ”ë° ì‚¬ìš©ëœë‹¤ê³  í•˜ì§€ë§Œ ì—„ì—°íˆ Public FaaS(AWS Lambdaë“±)ì™€ëŠ” êµ¬ë³„ë˜ì–´ì•¼ í•œë‹¤ê³  ìƒê°í•œë‹¤.</p><p>Serverless ë¼ê³  í•˜ëŠ” ìš©ì–´ë¥¼ ì‰½ê²Œ ìƒê°í•˜ëŠ” ì‚¬ëŒë“¤ì´ ë§ì€ë° ê²°êµ­ ë‚˜ì¤‘ì—ëŠ” ê°„ë‹¨í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ë“¤ì€ ë‹¤ Serverless ìŠ¤íƒ€ì¼ë¡œ ì „í™˜ë ê²ƒì´ë¼ëŠ” ì‚¬ìƒì„ ì„œë¹„ìŠ¤ë‚˜ í”Œë«í¼ì— ë„£ê³  ìˆëŠ” ì¶”ì„¸ë‹¤. </p><p>CNCF ì§„í˜•ì˜ Cloud Eventë¼ê³  í•˜ëŠ” ì´ë²¤íŠ¸ ê·¸ë¦¬ë“œë°©ì‹ì˜ í‘œì¤€í™”ë¥¼ ë”°ë¼ ê°€ëŠ”ê²ƒì¸ì§€ ì•„ë‹ˆë©´ ìƒˆë¡œìš´ ìŠ¤íƒ€ì¼ì„ ì •ì˜í•˜ë ¤ê³  í•˜ëŠ”ê²ƒì¸ì§€ëŠ” ê·¸ë“¤ì˜ í–¥í›„ Cloud Native ë¡œë“œë§µì— ë‹¬ë ¤ìˆë‹¤ í•´ë„ ë¬´ë°©í• ê²ƒ ê°™ë‹¤. </p><ul><li>Serverless Containerì˜ ì‹ ì†í•œ ë°°ì¹˜ê°€ ê°€ëŠ¥</li><li>Automatic scaling up and down to zero</li><li>Istio Component</li><li>ë°°í¬ ëœ ì½”ë“œ ë° configì˜ íŠ¹ì • ì‹œì  ìŠ¤ëƒ… ìƒ·</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="serving-resources"><code>Serving</code> Resources<a class="hash-link" href="#serving-resources" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h3><p>CRDsë¡œ ì •ì˜í•œ Objects ì§‘í•©ì²´, ì´ëŸ¬í•œ Objectë“¤ì€ Serverless ì›Œí¬ë¡œë“œ í˜•íƒœë¡œ ì •ì˜ë˜ê³  ì‚¬ìš©ëœë‹¤.
ê°€ì¥ ì¸ìƒê¹Šê³  ì¤‘ìš”í•œ ë¬¸êµ¬ëŠ” <code>Request-driven compute that can scale to zero</code> ì¸ ê²ƒ ê°™ë‹¤.</p><p>í•œë™ì•ˆ ìœ í–‰í–ˆë˜ OpenPaaS, CFê¸°ë°˜ì˜ PaaS í”Œë«í¼ì„ ë›°ì–´ë„˜ëŠ” êµ¬ì¶•í˜• ê·¸ê²ƒë„ ìŠ¤í”„ë§ë¶€íŠ¸ ì˜ì—­ê¹Œì§€ë„ kubernetes ê¸°ë°˜ ì´ë²¤íŠ¸ ë“œë¦¬ë¸ ì„œë²„ë¦¬ìŠ¤ë¡œ ê°„ë‹¤ëŠ” ì´ì•¼ê¸°...</p><p>ì´ë¯¸ í¼ë¸”ë¦­ìœ¼ë¡œëŠ” <a href="https://cloud.spring.io/spring-cloud-function/" target="_blank" rel="noopener noreferrer">GA</a>ë„ ë˜ì—ˆë‹¤.</p><p>ìš°ë¦¬ íŒ€ì›ë“¤ê³¼ í•¨ê»˜ ì—´ì‹¬íˆ vmware dispatch frameworkìœ¼ë¡œ ê°œë°œí•˜ê³  ìˆì§€ë§Œ ê²°êµ­ pivotalê³¼ vmwareëŠ” ê±°ì˜ í•œëª¸ì´ê¸°ì— ë”ìš± ë” ë³€í™”ê°€ í•„ìš”í•œ ìˆœê°„ì´ë‹¤.</p><p><img loading="lazy" src="https://github.com/knative/serving/raw/master/docs/spec/img/object_model.png" alt="serving" class="img_E7b_"></p><ul><li><code>Route</code>ëŠ” ì‚¬ìš©ì ì„œë¹„ìŠ¤ì— ëŒ€í•œ HTTP endpointë¥¼ ì œê³µ.</li><li><code>Revisions</code>ì€ code(function)ì™€ configë¡œ êµ¬ì„±ëœ ë¶ˆë³€ì˜ ìŠ¤ëƒ…ìƒ·. Routeë¥¼ í†µí•´ endpointë¥¼ í• ë‹¹ë°›ì§€ ëª»í•œ Revisionì€ ìë™ìœ¼ë¡œ kubernetes resourceì—ì„œ ì‚­ì œë¨</li><li><code>Configuration</code>ì€ ìš”êµ¬ë˜ëŠ” Revision ìµœì‹  ìƒíƒœë¥¼ ê¸°ë¡í•˜ê³  ìƒì„±í•˜ê³  ì¶”ì í• ìˆ˜ ìˆìŒ. ì†ŒìŠ¤ íŒ¨í‚¤ì§€(git repoë‚˜ archive)ë¥¼ ì»¨í…Œì´ë„ˆë¡œ ë³€í™˜í•˜ê¸° ìœ„í•œ ë‚´ìš©ì´ë‚˜ ë©”íƒ€ë°ì´í„°ë“±ì„ í¬í•¨ì‹œí‚¬ìˆ˜ ìˆìŒ. </li><li><code>Service</code>ëŠ” <code>Routes</code>ì™€ <code>Configurations</code> ë¦¬ì†ŒìŠ¤ì˜ ì¶”ìƒí™”ëœ ì§‘í•©ì²´. ëª¨ë“  ì›Œí¬ë¡œë“œì˜ lifecycleì„ ê´€ë¦¬í•¨. íŠ¸ë˜í”½ì„ í•­ìƒ ìµœì‹ ì˜ revisionìœ¼ë¡œ routeë˜ë„ë¡ ì •ì˜í• ìˆ˜ ìˆìŒ</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="events">Events<a class="hash-link" href="#events" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h2><p>CNCFì˜ <a href="https://www.cncf.io/events/" target="_blank" rel="noopener noreferrer">CloudEvent Spec.</a> ê¸°ë°˜ìœ¼ë¡œ í•˜ëŠ” ì´ë²¤íŠ¸ë¥¼ produce/comsume í•˜ëŠ” ë°©ë²•ì„ ì œê³µí•œë‹¤. í”ŒëŸ¬ê·¸ì¸ í˜•íƒœë¡œ ì´ë²¤íŠ¸ë¥¼ ìˆ˜ì‹ í• ìˆ˜ ìˆê³  ë‹¤ì–‘í•œ pub/sub ìŠ¤íƒ€ì¼ì˜ broker serviceë¥¼ í†µí•´ ì œê³µë ìˆ˜ ìˆë‹¤. </p><p>AzureëŠ” ì´ë¯¸ <a href="https://azure.microsoft.com/ko-kr/services/event-grid/" target="_blank" rel="noopener noreferrer">EventGridì„œë¹„ìŠ¤</a>ë¥¼ GAë¥¼ í•œ ìƒí™©ì´ê³  <a href="https://pivotal.io/kr/knative" target="_blank" rel="noopener noreferrer">Pivotal</a> ì§„ì˜ë„ Serverless WorkloadëŠ” <code>Knative</code>ê¸°ë°˜ìœ¼ë¡œ ë„˜ì–´ê°„ë‹¤ê³  í–ˆìœ¼ë‹ˆ <a href="https://github.com/vmware/dispatch" target="_blank" rel="noopener noreferrer">Dispatch</a> ë„ ê²°êµ­ ë”°ë¼ê°€ì§€ ì•Šì„ê¹Œ ìƒê°í•´ë³¸ë‹¤. </p><p><img loading="lazy" src="https://github.com/knative/docs/raw/master/eventing/concepts.png" alt="eventing_concept" class="img_E7b_"></p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="bus">Bus<a class="hash-link" href="#bus" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h3><p>Kafkaë‚˜ Natsì™€ ê°™ì€ ë©”ì‹œì§€ Busë¥¼ í†µí•´ K8sê¸°ë°˜ì˜ pub/subì„ ì œê³µí•˜ëŠ” ê°œë…. ì´ë²¤íŠ¸ëŠ” Channelì— ì˜í•´ ê²Œì‹œë˜ê³  ê´€ì‹¬ìˆëŠ” ì‚¬ëŒì—ê²Œ ë¼ìš°íŒ…ë¨.</p><ul><li>Channel : ì—¬ê¸°ì„œ ì´ì•¼ê¸° í•˜ëŠ” ì±„ë„ì€ íŠ¹ì • busì— ì‚¬ìš©ë˜ëŠ” ì´ë²¤íŠ¸ë¥¼ ë°›ê¸° ìœ„í•œ ë„¤íŠ¸ì›Œí¬ ê¸°ë°˜ ì—”ë“œí¬ì¸íŠ¸</li><li>Subscription : Channelì—ì„œ ìˆ˜ì‹ í•œ ì´ë²¤íŠ¸ë¥¼ ê´€ì‹¬ìˆëŠ” target, DNSì´ë¦„ìœ¼ë¡œ í‘œí˜„ë˜ëŠ” ì´ë²¤íŠ¸ì— ì—°ê²°í•¨</li><li>Bus : (kafka topicì— ì´ë²¤íŠ¸ê°€ ì „ë‹¬ë˜ëŠ”ê²ƒ ì²˜ëŸ¼) íŠ¹ì • ì§€ì†ì„± ì „ëµì„ ì‚¬ìš©í•˜ì—¬ Channelê³¼ Subscriptionì„ êµ¬í˜„í•˜ëŠ”ë° í•„ìš”í•œ ì ìš© ê³„ì¸µì„ ì •ì˜í•¨</li></ul><p>í˜„ì¬ 3ê°€ì§€ì˜ Busê°€ ì œê³µë¨ (<a href="https://github.com/knative/eventing/tree/master/pkg/buses/kafka" target="_blank" rel="noopener noreferrer">Kafka</a>, <a href="https://github.com/knative/eventing/tree/master/pkg/buses/stub" target="_blank" rel="noopener noreferrer">Stub</a>, <a href="https://github.com/knative/eventing/tree/master/pkg/buses/gcppubsub" target="_blank" rel="noopener noreferrer">GCP PubSub</a>)</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="sources">Sources<a class="hash-link" href="#sources" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h3><p>SourceëŠ” K8s ì™¸ë¶€ì˜ ë°ì´í„° ì†ŒìŠ¤ë¥¼ í”„ë¡œë¹„ì €ë‹í•˜ê³  ì´ë¥¼ í´ëŸ¬ìŠ¤í„°ë¡œ ë¼ìš°íŒ…í•˜ê¸° ìœ„í•œ ì¶”ìƒí™” ë ˆì´ì–´ë¥¼ ì œê³µí•¨. ì•„ë˜ì™€ ê°™ì€ ì†ŒìŠ¤ë“¤ì„ ì œê³µí•˜ê³  ìˆìŒ</p><ul><li>Feed : EventTypeê³¼ Action (CloudEvents í˜¸í™˜ HTTP endpoint)ê°„ì˜ ì—°ê²°ì„ ì •ì˜í•˜ëŠ” ê¸°ë³¸ ê°ì²´</li><li>EventType and ClusterEventType : EventSourceì—ì„œ ë¶„ë¦¬ë˜ëŠ” ê³µí†µìŠ¤í‚¤ë§ˆë¡œ íŠ¹ì • ì´ë²¤íŠ¸ì˜ ì§‘í•©, EventTypeì€ Namespace ë²”ìœ„ë‚´ì—ì„œ ì‚¬ìš©ë˜ê³  ClusterEventTypeì€ ëª¨ë“  Namespaceì—ì„œ ì‚¬ìš©ë ìˆ˜ ìˆë„ë¡ ê´€ë¦¬ìì— ì˜í•´ ì„¤ì¹˜ë¨</li><li>EventSource and ClusterEventSource : í•˜ë‚˜ ì´ìƒì˜ EventTypesë¥¼ ìƒì„± í•  ìˆ˜ìˆëŠ” ì™¸ë¶€ ì‹œìŠ¤í…œì„ ê¸°ìˆ í•¨</li></ul><p>í˜„ì¬ 3ê°€ì§€ Sourcesë¥¼ ì œê³µí•¨</p><ul><li>K8sevents : <a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.10/#event-v1-core" target="_blank" rel="noopener noreferrer">Kubernetes Events</a>ë¥¼ ìˆ˜ì§‘í•˜ê³  CloudEvents íƒ€ì…ìœ¼ë¡œ í‘œì‹œí•¨</li><li>Github : PR(pull request) notificationì„ ìˆ˜ì§‘í•˜ê³  CloudEvents íƒ€ì…ìœ¼ë¡œ í‘œì‹œí•¨</li><li>GCP PubSub : GCP PubSub topicìœ¼ë¡œ publishëœ ì´ë²¤íŠ¸ë¥¼ ìˆ˜ì§‘í•˜ê³  CloudEvents íƒ€ì…ìœ¼ë¡œ í‘œì‹œí•¨</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="flows">Flows<a class="hash-link" href="#flows" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h3><p>ë§ˆì§€ë§‰ìœ¼ë¡œ Sourceì—ì„œ Endpointê¹Œì§€ ë¬¶ì–´ì£¼ëŠ” Flowë¼ê³  ë¶€ë¥´ëŠ” ë†’ì€ ìˆ˜ì¤€ì˜ ì¶”ìƒí™”ê°€ ìˆë‹¤.
Specìœ¼ë¡œ ì´ë²¤íŠ¸ê°€ ë¼ìš°íŒ…ëœ Channelê³¼ Busë¥¼ ê¸°ì¬í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
FlowëŠ” Eventingì—ì„œ ìµœìƒìœ„ ê°œë…ìœ¼ë¡œ ì‚¬ìš©ìê°€ ì„ íƒí• ìˆ˜ ìˆê³ , ì™¸ë¶€ Source ì´ë²¤íŠ¸ì—ì„œ ëª©ì ì§€ê¹Œì§€ ì›í•˜ëŠ” ê²½ë¡œë¥¼ ê¸°ìˆ í• ìˆ˜ ìˆë‹¤.</p><h1>ì •ë¦¬</h1><p>ì›Œë‚™ ë°©ëŒ€í•œ ì–‘ì„ ê°€ì§€ê³  ìˆê³  ì´í•´í•˜ë ¤ê³  ë…¸ë ¥í•˜ë©´ì„œ ì ë‹¤ë³´ë‹ˆ ë²ˆì—­ìœ„ì£¼ë¡œ ë˜ì–´ë²„ë ¸ë‹¤.
ì›ë˜ ë‹¤ìŒë²ˆì— Nats Streamingì„ ë‹¤ë£° ì˜ˆì •ì´ì˜€ìœ¼ë‚˜,
ë‹¹ë¶„ê°„ì€ knative êµ¬ì„±ìš”ì†Œë¥¼ ì´í•´í•˜ê³  ì ìš©í•˜ëŠ” ìœ„ì£¼ë¡œ í¬ìŠ¤íŒ…ì„ í•  ì˜ˆì •ì´ë‹¤. ì•„ë§ˆë„ ëª¨ë“ˆë³„(Serving, Building, Eventing) ì‹œë¦¬ì¦ˆê°€ ë  ë“¯ í•˜ë‹¤.</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>íƒœê·¸:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/tags/knative">Knative</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/tags/kubernetes">Kubernetes</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/tags/faa-s">FaaS</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/tags/serverless">Serverless</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/tags/cr-ds">CRDs</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/tags/cloud-events">CloudEvents</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/tags/mesh">Mesh</a></li></ul></div><div class="col text--right col--3"><a aria-label="knative ì— ëŒ€í•´ ë” ì½ì–´ë³´ê¸°" href="/2018/08/01/knative"><b>ìì„¸íˆ ë³´ê¸°</b></a></div></footer></article><nav class="pagination-nav" aria-label="ë¸”ë¡œê·¸ ê²Œì‹œë¬¼ ëª©ë¡ íƒìƒ‰"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Blog</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/">Home</a></li><li class="footer__item"><a class="footer__link-item" href="/archive">Archive</a></li><li class="footer__item"><a class="footer__link-item" href="/tags">Tags</a></li></ul></div><div class="col footer__col"><div class="footer__title">Sponsors</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/pang4u">Pang4U</a></li><li class="footer__item"><a href="https://ko-fi.com/ddiiwoong" target="_blank" rel="noopener noreferrer" class="footer__link-item">Buy Me a Coffee<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/ddiiwoong" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/ddiiwoong" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.facebook.com/ddiiwoong" target="_blank" rel="noopener noreferrer" class="footer__link-item">Facebook<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://kr.linkedin.com/in/ddiiwoong" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div></div></footer></div>
<script src="/assets/js/runtime~main.13cb0e78.js"></script>
<script src="/assets/js/main.5e59ad0e.js"></script>
</body>
</html>