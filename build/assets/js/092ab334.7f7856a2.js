"use strict";(self.webpackChunkddii=self.webpackChunkddii||[]).push([[8508],{3905:function(e,t,a){a.d(t,{Zo:function(){return u},kt:function(){return m}});var n=a(67294);function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){s(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}var c=n.createContext({}),i=function(e){var t=n.useContext(c),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},u=function(e){var t=i(e.components);return n.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},k=n.forwardRef((function(e,t){var a=e.components,s=e.mdxType,r=e.originalType,c=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),k=i(a),m=s,d=k["".concat(c,".").concat(m)]||k[m]||p[m]||r;return a?n.createElement(d,o(o({ref:t},u),{},{components:a})):n.createElement(d,o({ref:t},u))}));function m(e,t){var a=arguments,s=t&&t.mdxType;if("string"==typeof e||s){var r=a.length,o=new Array(r);o[0]=k;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:s,o[1]=l;for(var i=2;i<r;i++)o[i]=a[i];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}k.displayName="MDXCreateElement"},75465:function(e,t,a){a.r(t),a.d(t,{assets:function(){return u},contentTitle:function(){return c},default:function(){return m},frontMatter:function(){return l},metadata:function(){return i},toc:function(){return p}});var n=a(87462),s=a(63366),r=(a(67294),a(3905)),o=["components"],l={layout:"single",title:"eksworkshop",comments:!0,classes:"wide",description:"eskworkshop \ud29c\ud1a0\ub9ac\uc5bc\uc744 \uc2e4\ud589\ud558\uace0 \uac04\ub2e8\ud55c Microservice\uc571\uc744 \ubc30\ud3ec\ud574\ubcf4\uc790",slug:"kubernetes/eksworkshop/",date:new Date("2019-03-29T00:00:00.000Z"),categories:["Kubernetes"],tags:["eks","aws","Kubernetes","eskworkshop","kubectl","Managed Kubernetes"]},c=void 0,i={permalink:"/kubernetes/eksworkshop/",editUrl:"https://github.com/ddiiwoong/newblog/tree/main/blog/2019-03-29-eksworkshop.md",source:"@site/blog/2019-03-29-eksworkshop.md",title:"eksworkshop",description:"eskworkshop \ud29c\ud1a0\ub9ac\uc5bc\uc744 \uc2e4\ud589\ud558\uace0 \uac04\ub2e8\ud55c Microservice\uc571\uc744 \ubc30\ud3ec\ud574\ubcf4\uc790",date:"2019-03-29T00:00:00.000Z",formattedDate:"March 29, 2019",tags:[{label:"eks",permalink:"/tags/eks"},{label:"aws",permalink:"/tags/aws"},{label:"Kubernetes",permalink:"/tags/kubernetes"},{label:"eskworkshop",permalink:"/tags/eskworkshop"},{label:"kubectl",permalink:"/tags/kubectl"},{label:"Managed Kubernetes",permalink:"/tags/managed-kubernetes"}],readingTime:14.23,truncated:!1,authors:[],frontMatter:{layout:"single",title:"eksworkshop",comments:!0,classes:"wide",description:"eskworkshop \ud29c\ud1a0\ub9ac\uc5bc\uc744 \uc2e4\ud589\ud558\uace0 \uac04\ub2e8\ud55c Microservice\uc571\uc744 \ubc30\ud3ec\ud574\ubcf4\uc790",slug:"kubernetes/eksworkshop/",date:"2019-03-29T00:00:00.000Z",categories:["Kubernetes"],tags:["eks","aws","Kubernetes","eskworkshop","kubectl","Managed Kubernetes"]},prevItem:{title:"Knative on EKS",permalink:"/kubernetes/knative-on-aws/"},nextItem:{title:"git-sync",permalink:"/kubernetes/git-sync/"}},u={authorsImageUrls:[]},p=[{value:"Amazon EKS (Elastic Container Service for Kubernetes)",id:"amazon-eks-elastic-container-service-for-kubernetes",level:2},{value:"eksworkshop.com",id:"eksworkshopcom",level:2},{value:"eksworkshop \ub530\ub77c\ud558\uae30\uc804 \uc0ac\uc804 \uc900\ube44\uc0ac\ud56d",id:"eksworkshop-\ub530\ub77c\ud558\uae30\uc804-\uc0ac\uc804-\uc900\ube44\uc0ac\ud56d",level:2},{value:"AWS account",id:"aws-account",level:3},{value:"IAM \uc124\uc815 (JSON template)",id:"iam-\uc124\uc815-json-template",level:3},{value:"kubectl, aws-iam-authenticator",id:"kubectl-aws-iam-authenticator",level:3},{value:"kubectl config\ub97c \uc800\uc7a5\ud558\uae30 \uc704\ud574 .kube directory\ub97c \uc0dd\uc131",id:"kubectl-config\ub97c-\uc800\uc7a5\ud558\uae30-\uc704\ud574-kube-directory\ub97c-\uc0dd\uc131",level:4},{value:"kubectl \uc124\uce58 (linux)",id:"kubectl-\uc124\uce58-linux",level:4},{value:"kubectl \uc124\uce58 (MacOS Homebrew)",id:"kubectl-\uc124\uce58-macos-homebrew",level:4},{value:"kubectl \uc124\uce58 (windows PowerShell)",id:"kubectl-\uc124\uce58-windows-powershell",level:4},{value:"kubectl \uc124\uce58 \ud655\uc778",id:"kubectl-\uc124\uce58-\ud655\uc778",level:4},{value:"aws-iam-authenticator \uc124\uce58",id:"aws-iam-authenticator-\uc124\uce58",level:4},{value:"aws-iam-authenticator binary \ub2e4\uc6b4\ub85c\ub4dc",id:"aws-iam-authenticator-binary-\ub2e4\uc6b4\ub85c\ub4dc",level:4},{value:"MacOS\uc758 \uacbd\uc6b0",id:"macos\uc758-\uacbd\uc6b0",level:5},{value:"MacOS bash \ud658\uacbd\ubcc0\uc218 \ucd94\uac00",id:"macos-bash-\ud658\uacbd\ubcc0\uc218-\ucd94\uac00",level:5},{value:"MacOS zsh \ud658\uacbd\ubcc0\uc218 \ucd94\uac00",id:"macos-zsh-\ud658\uacbd\ubcc0\uc218-\ucd94\uac00",level:5},{value:"aws-iam-authenticator binary \ud655\uc778",id:"aws-iam-authenticator-binary-\ud655\uc778",level:4},{value:"eksctl",id:"eksctl",level:3},{value:"eksctl binary \ub2e4\uc6b4\ub85c\ub4dc",id:"eksctl-binary-\ub2e4\uc6b4\ub85c\ub4dc",level:4},{value:"MacOS Homebrew \uc124\uce58",id:"macos-homebrew-\uc124\uce58",level:4},{value:"Windows \uc124\uce58 (PowerShell, chocolatey)",id:"windows-\uc124\uce58-powershell-chocolatey",level:4},{value:"eksctl \ub3d9\uc791\ud655\uc778",id:"eksctl-\ub3d9\uc791\ud655\uc778",level:4},{value:"CLI API \uc790\uaca9\uc99d\uba85 \uad6c\uc131",id:"cli-api-\uc790\uaca9\uc99d\uba85-\uad6c\uc131",level:4},{value:"~/.aws/credentials",id:"awscredentials",level:4},{value:"~/.aws/config",id:"awsconfig",level:4},{value:"EKS \ubc30\ud3ec",id:"eks-\ubc30\ud3ec",level:2},{value:"Config File \uc0ac\uc6a9",id:"config-file-\uc0ac\uc6a9",level:3},{value:"05-advanced-nodegroups.yaml",id:"05-advanced-nodegroupsyaml",level:4},{value:"Kubernetes \ub300\uc2dc\ubcf4\ub4dc \ubc30\ud3ec",id:"kubernetes-\ub300\uc2dc\ubcf4\ub4dc-\ubc30\ud3ec",level:2},{value:"Microservice app \ubc30\ud3ec",id:"microservice-app-\ubc30\ud3ec",level:2},{value:"EKS \ud074\ub7ec\uc2a4\ud130 \ubc0f \uc0ad\uc81c",id:"eks-\ud074\ub7ec\uc2a4\ud130-\ubc0f-\uc0ad\uc81c",level:2},{value:"\uc815\ub9ac",id:"\uc815\ub9ac",level:2}],k={toc:p};function m(e){var t=e.components,l=(0,s.Z)(e,o);return(0,r.kt)("wrapper",(0,n.Z)({},k,l,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"amazon-eks-elastic-container-service-for-kubernetes"},"Amazon EKS (Elastic Container Service for Kubernetes)"),(0,r.kt)("p",null,"Kubernetes Managed Service\uc778 Amazon EKS\uac00 2018\ub144 7\uc6d4 \ucd9c\uc2dc\ub418\uace0 2019\ub144 1\uc6d4 \uc815\uc2dd\uc73c\ub85c \uc11c\uc6b8\ub9ac\uc804\uc5d0 \ucd9c\uc2dc\ub418\uc5c8\ub2e4. \uac1c\uc778\uc801\uc73c\ub85c \uc644\uc804\uad00\ub9ac\ud615 Kubernetes \ucd9c\uc2dc\uac00 \ub2a6\uc5b4\uc838\uc11c AWS \ud589\ubcf4\uac00 \ub2e4\uc18c \ub2a6\ub2e4\uace0 \uc0dd\uac01\uc740 \ud588\uc73c\ub098 ALB\uc640 VPC\uc5f0\ub3d9, \uc5ec\ub7ec\uac00\uc9c0 \uae30\uc874 OpenSource\uc640\uc758 \uc5f0\uacb0\uace0\ub9ac\ub97c \ubc30\uc81c\ud558\uace0 \uc790\uccb4 Managed\uc11c\ube44\uc2a4\uc640 \uc5f0\ub3d9\ud560\uac83\ub4e4\uc774 \ub9ce\uae30 \ub54c\ubb38\uc5d0 \ub2f9\uc5f0\ud788 \ud0c0\uc0ac\uc5d0 \ube44\ud574 \ub2a6\uc5b4\uc9c4\uac78\ub85c \ubcf4\uc778\ub2e4. \uc5b8\uc81c\ub098 \uadf8\ub7ac\uc9c0\ub9cc \uc624\ud508\uc18c\uc2a4\ub97c \ubc1b\uc544\ub4e4\uc774\ub294 \ub290\ub08c\uc774 \uc544\ub2c8\ub77c \ubb54\uac00 \uc644\uc131\ub41c \uc81c\ud488\uc744 \uc4f0\ub294 \ub290\ub08c(?)\uc774\ub2e4. \ubb3c\ub860 \ubd88\ud3b8\ud55c \ubd80\ubd84\uacfc \uac10\uc218\ud574\uc57c\ud560 \ub0b4\uc6a9\ub4e4\uc740 \uc870\uae08 \uc788\uc9c0\ub9cc \uae30\uc874 AWS \ucda9\uc131 User\uc5d0\uac8c \ud638\uc751\uc744 \uc5bb\uc744\uc218 \uc788\uae30 \ub54c\ubb38\uc774 \uc544\ub2d0\uae4c\ub77c\ub294 \uc0dd\uac01\uc744 \ud574\ubcf4\uba74\uc11c \ud3ec\uc2a4\ud305\uc744 \uc2dc\uc791\ud558\ub824\uace0 \ud55c\ub2e4.  "),(0,r.kt)("p",null,"\uc624\ud508\uc18c\uc2a4\uac00 \uc544\ub2cc Managed\uc11c\ube44\uc2a4\uc5d0 \ub300\ud55c \ub9ac\ubdf0\ub294 \ucc98\uc74c\uc774\uc9c0\ub9cc 4\uc6d4 10\uc77c ",(0,r.kt)("a",{parentName:"p",href:"https://www.meetup.com/ko-KR/awskrug/events/260024327/"},"AWS\ud310\uad50\uc18c\ubaa8\uc784")," \ubc1c\ud45c\ub3c4 \uc788\uace0, \uc2e4\uc81c \uace0\ub824\uc911\uc778 \uc544\ud0a4\ud14d\ucc98\uc5d0 \ud3ec\ud568\uc774 \ub418\uc5b4\uc57c \ud558\ub294 EKS\uc5d0 \ub300\ud574\uc11c \uc0b4\ud3b4\ubcf4\uace0 eskworkshop \ud29c\ud1a0\ub9ac\uc5bc\uc744 \uc2e4\ud589\ud574\ubcf4\uba74\uc11c \ub2e4\ub978 \uad00\ub9ac\ud615 Kubernetes \uc11c\ube44\uc2a4\ub4e4\uc5d0 \ube44\ud574 \uc5b4\ub5a4 \uc0ac\ud56d\uc744 \uc880\ub354 \uace0\ubbfc\ud574\uc57c \ud558\ub294\uc9c0 \uc815\ub9ac\ud574\ubcf4\uace0 \ub118\uc5b4\uac00\uba74 \uc88b\uc744\ub4ef \ud558\ub2e4."),(0,r.kt)("h2",{id:"eksworkshopcom"},"eksworkshop.com"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://eksworkshop.com/"},"https://eksworkshop.com/"),(0,r.kt)("br",{parentName:"p"}),"\n","Kubernete\ub97c \ucc98\uc74c\uc811\ud558\ub294 \uc720\uc800\ub97c \uc704\ud55c \uae30\ubcf8 \uac1c\ub150\uacfc \uc544\ud0a4\ud14d\ucc98, \uadf8\ub9ac\uace0 VPC, ALB\ub97c \ud65c\uc6a9\ud558\uc5ec EKS\uc5d0 \ub300\ud55c \uc124\uce58, \uad6c\uc131, \ub370\ubaa8\uc571 \ubc30\ud3ec \ub4f1\uc744 \ud574\ubcfc\uc218 \uc788\ub294 \ud29c\ud1a0\ub9ac\uc5bc \uc0ac\uc774\ud2b8\uc774\ub2e4.  "),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://www.facebook.com/groups/awskrug/"},"AWSKRUG"),"\uc5d0\uc11c \ud55c\uae00\ud654 \uc791\uc5c5\ub3c4 \uc9c4\ud589\uc911\uc774\ub2e4.  ",(0,r.kt)("a",{parentName:"p",href:"https://awskrug.github.io/eks-workshop/deploy/"},"\ud55c\uae00\ud654 \ub9c1\ud06c")),(0,r.kt)("h2",{id:"eksworkshop-\ub530\ub77c\ud558\uae30\uc804-\uc0ac\uc804-\uc900\ube44\uc0ac\ud56d"},"eksworkshop \ub530\ub77c\ud558\uae30\uc804 \uc0ac\uc804 \uc900\ube44\uc0ac\ud56d"),(0,r.kt)("p",null,"eksworkshop\uc5d0\uc11c\ub294 \uae30\ubcf8\uc801\uc73c\ub85c workshop\uc774\ub77c\ub294 \uc2e0\uaddc IAM \uacc4\uc815\uc744 \uc0dd\uc131\ud558\uace0 Cloud9 Workspace \uc640 \uba87\uac00\uc9c0 \uc124\uc815\ub4e4\uc744 \uc9c4\ud589\ud558\uc9c0\ub9cc ",(0,r.kt)("a",{parentName:"p",href:"https://www.meetup.com/ko-KR/awskrug/events/260024327/"},"AWS\ud310\uad50\uc18c\ubaa8\uc784"),"\uc744 \uc704\ud574 \ucd5c\ub300\ud55c \ube44\uc6a9\uc774 \ub4dc\ub294 \uad6c\uc131\uc694\uc18c\ub97c \ubc30\uc81c\ud558\uace0 \uc791\uc131\ud558\uace0\uc790 \ud55c\ub2e4."),(0,r.kt)("h3",{id:"aws-account"},"AWS account"),(0,r.kt)("p",null,"Free Tier\ub294 EKS\ub97c \uc790\uc720\ub86d\uac8c \ud65c\uc6a9\ud560\uc218 \uc5c6\ub2e4.",(0,r.kt)("br",{parentName:"p"}),"\n","\uad00\ub828 issue - ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/aws/containers-roadmap/issues/78"},"https://github.com/aws/containers-roadmap/issues/78"),"  "),(0,r.kt)("p",null,"\uc2e4\uc81c \uc0ac\uc6a9\uc911\uc778 \uacc4\uc815\uc774\ub098 Credit\uc774 \ud655\ubcf4\ub41c \uacc4\uc815\uc774 \ud544\uc694\ud558\ub2e4.  "),(0,r.kt)("h3",{id:"iam-\uc124\uc815-json-template"},"IAM \uc124\uc815 (JSON template)"),(0,r.kt)("p",null,"EKSworkshop\uc5d0\uc11c\ub294 Full administrator \uacc4\uc815\uc744 \ud544\uc694\ub85c \ud558\uc9c0\ub9cc eksctl\ub85c \ubc30\ud3ec\ub97c \uc9c4\ud589\ud558\ubbc0\ub85c \uadf8 \uae30\uc900\uc73c\ub85c IAM\uc124\uc815\uc744 \uc9c4\ud589\ud55c\ub2e4.  "),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/terraform-aws-modules/terraform-aws-eks/blob/master/examples/eks_test_fixture/README.md"},"terraform eks iam \uc124\uc815"),"\uc744 \ucc38\uace0\ud558\ub824\uace0 \ud588\uc9c0\ub9cc eksctl\uacfc terraform\uacfc\uc758 \uc57d\uac04 \ub2e4\ub978 \ubc29\uc2dd\uc758 \ubc30\ud3ec\ub85c \uc778\ud574 \uc5b4\uca54\uc218\uc5c6\uc774 EKS Full Access\uad8c\ud55c\uc744 \ud560\ub2f9\ud558\uc600\ub2e4.",(0,r.kt)("br",{parentName:"p"}),"\n","(\ub2e4\ub978 \uc720\uacbd\ud5d8\uc790\uc758 \ub3c4\uc6c0\uc774 \ud544\uc694\ud55c \uc0c1\ud669 \u3160\u3160)"),(0,r.kt)("p",null,"\uc790\uc138\ud55c JSON \ub0b4\uc6a9\uc740 ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/ddiiwoong/eksworkshop/blob/master/iam_for_eksworkshop.json"},"\ub9c1\ud06c"),"\ub97c \ucc38\uace0\ud55c\ub2e4.  "),(0,r.kt)("h3",{id:"kubectl-aws-iam-authenticator"},"kubectl, aws-iam-authenticator"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"kubectl : kubernetes CLI"),(0,r.kt)("li",{parentName:"ul"},"aws-iam-authenticator : AWS IAM Authenticator CLI")),(0,r.kt)("h4",{id:"kubectl-config\ub97c-\uc800\uc7a5\ud558\uae30-\uc704\ud574-kube-directory\ub97c-\uc0dd\uc131"},"kubectl config\ub97c \uc800\uc7a5\ud558\uae30 \uc704\ud574 .kube directory\ub97c \uc0dd\uc131"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ mkdir -p ~/.kube\n")),(0,r.kt)("h4",{id:"kubectl-\uc124\uce58-linux"},"kubectl \uc124\uce58 (linux)"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'$ sudo curl --silent --location -o /usr/local/bin/kubectl "https://amazon-eks.s3-us-west-2.amazonaws.com/1.11.5/2018-12-06/bin/linux/amd64/kubectl"\n$ sudo chmod +x /usr/local/bin/kubectl\n')),(0,r.kt)("h4",{id:"kubectl-\uc124\uce58-macos-homebrew"},"kubectl \uc124\uce58 (MacOS Homebrew)"),(0,r.kt)("p",null,"MacOS\ub294 brew\ub85c \uc124\uce58\ud558\uc600\ub2e4.",(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/tasks/tools/install-kubectl/#install-with-homebrew-on-macos"},"https://kubernetes.io/docs/tasks/tools/install-kubectl/#install-with-homebrew-on-macos")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ brew install kubernetes-cli\n")),(0,r.kt)("h4",{id:"kubectl-\uc124\uce58-windows-powershell"},"kubectl \uc124\uce58 (windows PowerShell)"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/install-kubectl.html"},"https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/install-kubectl.html")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"curl -o kubectl.exe https://amazon-eks.s3-us-west-2.amazonaws.com/1.10.3/2018-07-26/bin/windows/amd64/kubectl.exe\n")),(0,r.kt)("h4",{id:"kubectl-\uc124\uce58-\ud655\uc778"},"kubectl \uc124\uce58 \ud655\uc778"),(0,r.kt)("p",null,"\ud604\uc7ac MacOS\uc5d0\uc11c\ub294 1.11.7 \ubc84\uc804\uc774 \uc124\uce58\ub418\uc5b4 \uc788\ub2e4. (\ub2e4\ub978\uacbd\ub85c\ub85c \uc124\uce58\ub428)"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ kubectl version --short --client\nClient Version: v1.11.7-dispatcher\n")),(0,r.kt)("h4",{id:"aws-iam-authenticator-\uc124\uce58"},"aws-iam-authenticator \uc124\uce58"),(0,r.kt)("p",null,"Amazon EKS\ub294 IAM\uc744 \uc0ac\uc6a9\ud558\uc5ec Kubernetes\uc6a9 AWS IAM Authenticator\ub97c \ud1b5\ud574 Kubernetes \ud074\ub7ec\uc2a4\ud130\uc5d0 \uc778\uc99d\uc744 \uc81c\uacf5\ud55c\ub2e4.  Go(\ubc84\uc804 1.7\uc774\uc0c1)\uac00 \uc124\uce58\ub418\uc5b4 \uc788\uc73c\uba74 \uc544\ub798\uc640 \uac19\uc774 \uc9c4\ud589\ud558\uba74 \ub41c\ub2e4. "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ go get -u -v github.com/kubernetes-sigs/aws-iam-authenticator/cmd/aws-iam-authenticator\n$ sudo mv ~/go/bin/aws-iam-authenticator /usr/local/bin/aws-iam-authenticator\n")),(0,r.kt)("p",null,"\ub9cc\uc57d Go\uc124\uce58\uac00 \uc548\ub418\uc5b4 \uc788\ub2e4\uba74 \ub2e4\uc74c \ub9c1\ud06c\ub97c \ud1b5\ud574 \uc124\uce58 \uc9c4\ud589\ud560\uc218 \uc788\ub2e4.",(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("a",{parentName:"p",href:"https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/install-aws-iam-authenticator.html"},"https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/install-aws-iam-authenticator.html")),(0,r.kt)("h4",{id:"aws-iam-authenticator-binary-\ub2e4\uc6b4\ub85c\ub4dc"},"aws-iam-authenticator binary \ub2e4\uc6b4\ub85c\ub4dc"),(0,r.kt)("p",null,"Linux: ",(0,r.kt)("a",{parentName:"p",href:"https://amazon-eks.s3-us-west-2.amazonaws.com/1.10.3/2018-07-26/bin/linux/amd64/aws-iam-authenticator"},"https://amazon-eks.s3-us-west-2.amazonaws.com/1.10.3/2018-07-26/bin/linux/amd64/aws-iam-authenticator"),(0,r.kt)("br",{parentName:"p"}),"\n","MacOS: ",(0,r.kt)("a",{parentName:"p",href:"https://amazon-eks.s3-us-west-2.amazonaws.com/1.10.3/2018-07-26/bin/darwin/amd64/aws-iam-authenticator"},"https://amazon-eks.s3-us-west-2.amazonaws.com/1.10.3/2018-07-26/bin/darwin/amd64/aws-iam-authenticator"),(0,r.kt)("br",{parentName:"p"}),"\n","Windows: ",(0,r.kt)("a",{parentName:"p",href:"https://amazon-eks.s3-us-west-2.amazonaws.com/1.10.3/2018-07-26/bin/windows/amd64/aws-iam-authenticator.exe"},"https://amazon-eks.s3-us-west-2.amazonaws.com/1.10.3/2018-07-26/bin/windows/amd64/aws-iam-authenticator.exe")),(0,r.kt)("h5",{id:"macos\uc758-\uacbd\uc6b0"},"MacOS\uc758 \uacbd\uc6b0"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ curl -o aws-iam-authenticator https://amazon-eks.s3-us-west-2.amazonaws.com/1.10.3/2018-07-26/bin/darwin/amd64/aws-iam-authenticator\n$ chmod +x ./aws-iam-authenticator\n$ cp ./aws-iam-authenticator $HOME/bin/aws-iam-authenticator && export PATH=$HOME/bin:$PATH\n")),(0,r.kt)("h5",{id:"macos-bash-\ud658\uacbd\ubcc0\uc218-\ucd94\uac00"},"MacOS bash \ud658\uacbd\ubcc0\uc218 \ucd94\uac00"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ echo 'export PATH=$HOME/bin:$PATH' >> ~/.bash_profile\n")),(0,r.kt)("h5",{id:"macos-zsh-\ud658\uacbd\ubcc0\uc218-\ucd94\uac00"},"MacOS zsh \ud658\uacbd\ubcc0\uc218 \ucd94\uac00"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ echo 'export PATH=$HOME/bin:$PATH' >> ~/.zshrc\n")),(0,r.kt)("h4",{id:"aws-iam-authenticator-binary-\ud655\uc778"},"aws-iam-authenticator binary \ud655\uc778"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ aws-iam-authenticator help\n")),(0,r.kt)("h3",{id:"eksctl"},"eksctl"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://github.com/weaveworks/eksctl/blob/master/logo/eksctl.png?raw=true",alt:"mascot"})),(0,r.kt)("p",null,"eksctl\uc740 weaveworks\uc5d0\uc11c contribute\ud558\uace0 \uc788\ub294 \uc624\ud508\uc18c\uc2a4\ub85c EKS \ud074\ub7ec\uc2a4\ud130\ub97c \uc0dd\uc131\ud558\ub294 \uac04\ub2e8\ud55c CLI \ub3c4\uad6c\uc774\ub2e4. Go\ub85c \uc791\uc131\ub418\uc5b4 \uc788\uace0 CloudFormation\uc744 \uae30\ubcf8\uc73c\ub85c \ub3d9\uc791\ud55c\ub2e4.  "),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://eksctl.io/"},"https://eksctl.io/"),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("a",{parentName:"p",href:"https://github.com/weaveworks/eksctl"},"https://github.com/weaveworks/eksctl")),(0,r.kt)("h4",{id:"eksctl-binary-\ub2e4\uc6b4\ub85c\ub4dc"},"eksctl binary \ub2e4\uc6b4\ub85c\ub4dc"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'$ curl --silent --location "https://github.com/weaveworks/eksctl/releases/download/latest_release/eksctl_$(uname -s)_amd64.tar.gz" | tar xz -C /tmp\n$ sudo mv -v /tmp/eksctl /usr/local/bin\n')),(0,r.kt)("h4",{id:"macos-homebrew-\uc124\uce58"},"MacOS Homebrew \uc124\uce58"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ brew tap weaveworks/tap\n$ brew install weaveworks/tap/eksctl\n")),(0,r.kt)("h4",{id:"windows-\uc124\uce58-powershell-chocolatey"},"Windows \uc124\uce58 (PowerShell, chocolatey)"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"chocolatey install eksctl\n")),(0,r.kt)("h4",{id:"eksctl-\ub3d9\uc791\ud655\uc778"},"eksctl \ub3d9\uc791\ud655\uc778"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ eksctl version\n")),(0,r.kt)("h4",{id:"cli-api-\uc790\uaca9\uc99d\uba85-\uad6c\uc131"},"CLI API \uc790\uaca9\uc99d\uba85 \uad6c\uc131"),(0,r.kt)("p",null,"\uc0ac\uc804\uc124\uc815\ud55c aws configure\uac00 \uc788\ub294\uc9c0 \ud655\uc778. \uae30\uc874 Terraform\uc774\ub098 kops \uc0ac\uc6a9\ud55c\uc801\uc774 \uc788\uc73c\uba74 \uac74\ub108\ub6f0\uc5b4\ub3c4 \ub41c\ub2e4.  "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ ls  ~/.aws\n")),(0,r.kt)("p",null,"\uc5c6\uc744\uacbd\uc6b0 aws \uc790\uaca9\uc99d\uba85\uc744 \uc0dd\uc131\ud55c\ub2e4."),(0,r.kt)("h4",{id:"awscredentials"},"~/.aws/credentials"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[default]\naws_access_key_id={EXAMPLE}\naws_secret_access_key={EXAMPLEKEY}\n")),(0,r.kt)("h4",{id:"awsconfig"},"~/.aws/config"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[default]\nregion=ap-northeast-2\noutput=json\n")),(0,r.kt)("h2",{id:"eks-\ubc30\ud3ec"},"EKS \ubc30\ud3ec"),(0,r.kt)("p",null,"kubectl, aws-iam-authenticator, eksctl, AWS \uc790\uaca9\uc99d\uba85 \ud658\uacbd\uae4c\uc9c0 \uad6c\uc131\ub418\uc5b4 \uc788\uc73c\uba74 \ubc14\ub85c \ubc30\ud3ec\uac00 \uac00\ub2a5\ud558\ub2e4.  "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'$ eksctl create cluster --name=eksworkshop-eksctl --nodes=3 --node-ami=auto\n[\u2139]  using region ap-northeast-2\n[\u2139]  setting availability zones to [ap-northeast-2a ap-northeast-2c ap-northeast-2a]\n[\u2139]  subnets for ap-northeast-2a - public:192.168.0.0/19 private:192.168.96.0/19\n[\u2139]  subnets for ap-northeast-2c - public:192.168.32.0/19 private:192.168.128.0/19\n[\u2139]  subnets for ap-northeast-2a - public:192.168.64.0/19 private:192.168.160.0/19\n[\u2139]  nodegroup "ng-cfb3cb01" will use "ami-0c7972077aa002104" [AmazonLinux2/1.11]\n[\u2139]  creating EKS cluster "eksworkshop-eksctl" in "ap-northeast-2" region\n[\u2139]  will create 2 separate CloudFormation stacks for cluster itself and the initial nodegroup\n[\u2139]  if you encounter any issues, check CloudFormation console or try \'eksctl utils describe-stacks --region=ap-northeast-2 --name=eksworkshop-eksctl\'\n[\u2139]  creating cluster stack "eksctl-eksworkshop-eksctl-cluster"\n[\u2139]  creating nodegroup stack "eksctl-eksworkshop-eksctl-nodegroup-ng-cfb3cb01"\n[\u2139]  --nodes-min=2 was set automatically\n[\u2139]  --nodes-max=2 was set automatically\n[\u2714]  all EKS cluster resource for "eksworkshop-eksctl" had been created\n[\u2714]  saved kubeconfig as "/Users/ddii/.kube/config"\n[\u2139]  nodegroup "ng-cfb3cb01" has 0 node(s)\n[\u2139]  waiting for at least 2 node(s) to become ready in "ng-cfb3cb01"\n[\u2139]  nodegroup "ng-cfb3cb01" has 2 node(s)\n[\u2139]  node "ip-192-168-42-42.ap-northeast-2.compute.internal" is ready\n[\u2139]  node "ip-192-168-66-165.ap-northeast-2.compute.internal" is ready\n[\u2139]  kubectl command should work with "/Users/ddii/.kube/config", try \'kubectl get nodes\'\n[\u2714]  EKS cluster "eksworkshop-eksctl" in "ap-northeast-2" region is ready\n')),(0,r.kt)("p",null,"\uc11c\uc6b8\ub9ac\uc804(ap-northeast-2)\uae30\uc900 \uc57d 15-20\ubd84\uc774 \uc18c\uc694\ub418\uba70 ",(0,r.kt)("inlineCode",{parentName:"p"},"eksctl")," \uae30\ubcf8 \uc124\uc815\uac12\uc740 \ub2e4\uc74c\uacfc \uac19\ub2e4."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\ud074\ub7ec\uc2a4\ud130\uba85\uc740 \uc790\ub3d9\uc0dd\uc131, --name \uc635\uc158\uc73c\ub85c \uc9c0\uc815\uac00\ub2a5 (eksworkshop-eksctl)"),(0,r.kt)("li",{parentName:"ul"},"CloudFormation : eksctl-{$Cluster_Name}-cluster"),(0,r.kt)("li",{parentName:"ul"},"m5.large * 2 instances (",(0,r.kt)("a",{parentName:"li",href:"https://github.com/awslabs/amazon-eks-ami/blob/7f6c8cb3597e17f6e5f7df96d12bccf5604dc909/amazon-eks-nodegroup.yaml"},"EKS Instance Type")," NodeInstanceType.AllowedValues \ucc38\uace0)"),(0,r.kt)("li",{parentName:"ul"},"Default AMI : AWS EKS AMI (custom EKS AMI \uac00\ub2a5 - Packer\ud65c\uc6a9)"),(0,r.kt)("li",{parentName:"ul"},"Default Region : us-west-2"),(0,r.kt)("li",{parentName:"ul"},"dedicated VPC : 192.168.0.0/16 "),(0,r.kt)("li",{parentName:"ul"},"kubernetes version : 1.11.x (",(0,r.kt)("a",{parentName:"li",href:"https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/platform-versions.html"},"EKS Version")," \ucc38\uace0)"),(0,r.kt)("li",{parentName:"ul"},"StorageClass : gp2 (",(0,r.kt)("a",{parentName:"li",href:"https://kubernetes.io/docs/concepts/storage/storage-classes/#aws-ebs"},"AWS EBS")," \ucc38\uace0)"),(0,r.kt)("li",{parentName:"ul"},"CNI : ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/aws/amazon-vpc-cni-k8s"},"Amazon VPC")),(0,r.kt)("li",{parentName:"ul"},"Node Autoscaler : --node-min, --node-max Auto Scaling \uc124\uc815"),(0,r.kt)("li",{parentName:"ul"},"\uae30\ubcf8 Pod \uac1c\uc218 : ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/awslabs/amazon-eks-ami/blob/7f6c8cb3597e17f6e5f7df96d12bccf5604dc909/files/eni-max-pods.txt"},"\ucc38\uace0")),(0,r.kt)("li",{parentName:"ul"},"nodegroup : worker\uac00 \ud3ec\ud568\ub418\ub294 group "),(0,r.kt)("li",{parentName:"ul"},"kubeconfig : ~/.kube/config \ub85c \ud1b5\ud569\ub428")),(0,r.kt)("h3",{id:"config-file-\uc0ac\uc6a9"},"Config File \uc0ac\uc6a9"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/weaveworks/eksctl/tree/master/examples"},"https://github.com/weaveworks/eksctl/tree/master/examples"),"\ub97c \ucc38\uace0\ud558\uc5ec ",(0,r.kt)("inlineCode",{parentName:"p"},"YAML"),"\ud615\ud0dc\ub85c \uc791\uc131\ud558\uc5ec \ubc30\ud3ec\uac00\ub2a5\ud558\ub2e4. "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ eksctl create cluster -f example.yaml\n")),(0,r.kt)("p",null,"\uae30\uc874\uc5d0 \uad00\ub9ac\ud558\ub294 VPC subnet\uc815\ubcf4 \ubc0f AutoScaling, AZ(availabilityZones)\uc124\uc815, nodegroup \uad00\ub9ac, node Instance\uc5d0 preBootstrapCommand\ub4f1\uc744 \uc544\ub798 \uc608\uc2dc\uc640 \uac19\uc774 \ubbf8\ub9ac \uc791\uc131\ud558\uba74 GitOps\uce21\uba74\uc5d0\uc11c \ud65c\uc6a9\ub3c4\uac00 \ub354\uc6b1 \ub192\uc544\uc9c8\uc218 \uc788\ub2e4."),(0,r.kt)("h4",{id:"05-advanced-nodegroupsyaml"},"05-advanced-nodegroups.yaml"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'# An advanced example of ClusterConfig object with customised nodegroups:\n--- \napiVersion: eksctl.io/v1alpha4\nkind: ClusterConfig\n\nmetadata:\n  name: cluster-5\n  region: eu-west-2\n\nnodeGroups:\n  - name: ng1-public\n    instanceType: m5.xlarge\n    minSize: 2\n    maxSize: 8\n    labels:\n      nodegroup-type: frontend-workloads\n    iam:\n      withAddonPolicies:\n        autoScaler: true\n\n  - name: ng2-private-a\n    instanceType: m5.large\n    desiredCapacity: 2\n    labels:\n      nodegroup-type: backend-cluster-addons\n    privateNetworking: true\n    preBootsrapCommand:\n      # allow docker registries to be deployed as cluster service \n      - \'echo {\\"insecure-registries\\": [\\"172.20.0.0/16\\",\\"10.100.0.0/16\\"]} > /etc/docker/daemon.json\'\n      - "systemctl restart docker"\n\n  - name: ng3-private-b\n    instanceType: c3.8xlarge\n    desiredCapacity: 4\n    labels:\n      nodegroup-type: very-special-science-workloads\n    privateNetworking: true\n    availabilityZones: ["eu-west-2a"] # use single AZ to optimise data transfer between isntances\n    preBootstrapCommand:\n      # disable hyperthreading\n      - "for n in $(cat /sys/devices/system/cpu/cpu*/topology/thread_siblings_list | cut -s -d, -f2- | tr \',\' \'\\n\' | sort -un); do echo 0 > /sys/devices/system/cpu/cpu${n}/online; done"\n\n# cluster AZs must be set explicitly for single AZ nodegroup example to work\navailabilityZones: ["eu-west-2a", "eu-west-2b", "eu-west-2c"]\n')),(0,r.kt)("h2",{id:"kubernetes-\ub300\uc2dc\ubcf4\ub4dc-\ubc30\ud3ec"},"Kubernetes \ub300\uc2dc\ubcf4\ub4dc \ubc30\ud3ec"),(0,r.kt)("p",null,"Kubernetes \uacf5\uc2dd \ub300\uc2dc\ubcf4\ub4dc\ub294 \uae30\ubcf8\uc73c\ub85c \ubc30\ud3ec\ub418\uc9c0 \uc54a\uae30 \ub54c\ubb38\uc5d0 \uc218\ub3d9\uc73c\ub85c \ubc30\ud3ec\ud574\uc57c\ud55c\ub2e4. \uc124\uce58 \ubc29\ubc95\uc740 ",(0,r.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/tasks/access-application-cluster/web-ui-dashboard/"},"\uacf5\uc2dd \ubb38\uc11c"),"\uc5d0\uc11c \ud655\uc778\uac00\ub2a5\ud558\ub2e4.  "),(0,r.kt)("p",null,"\uc704\uc5d0\uc11c \uad6c\uc131\ub41c \ud074\ub7ec\uc2a4\ud130\uc5d0\uc11c Kubernetes \ub300\uc2dc\ubcf4\ub4dc\ub97c \ubc30\ud3ec\ud55c\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v1.10.1/src/deploy/recommended/kubernetes-dashboard.yaml\n")),(0,r.kt)("p",null,"\uc811\uc18d\uc744 \uc704\ud574 kube-proxy \uae30\ub2a5\uc744 \ud65c\uc6a9\ud558\uc5ec 8080\ud3ec\ud2b8\ub85c expose\ub97c \uc9c4\ud589\ud55c\ub2e4. \ubaa8\ub4e0 \uc778\ud130\ud398\uc774\uc2a4\uc5d0\uc11c \ud544\ud130\ub9c1\uc5c6\uc774 \uc811\uc18d\uc774 \uac00\ub2a5\ud558\ub3c4\ub85d \uc635\uc158\uc744 \uc9c0\uc815\ud55c\ub2e4.\n\uc544\ub798 \uba85\ub839\uc740 \ud130\ubbf8\ub110\uc5d0\uc11c \ubc31\uadf8\ub77c\uc6b4\ub4dc\ub85c \uacc4\uc18d \ub3d9\uc791\ud55c\ub2e4.  "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ kubectl proxy --port=8080 --address='0.0.0.0' --disable-filter=true &\nW0328 16:39:09.061754    9100 proxy.go:139] Request filter disabled, your proxy is vulnerable to XSRF attacks, please be cautious\n")),(0,r.kt)("p",null,"TOKEN\uc73c\ub85c \uc811\uc18d\ud558\uae30 \uc704\ud574 aws-iam-authenticator\ub97c \ud1b5\ud574 \ud574\ub2f9 \ud074\ub7ec\uc2a4\ud130 token\uc744 \ud655\uc778\ud55c\ub2e4.  "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ aws-iam-authenticator token -i eksworkshop-eksctl --token-only\nk8s-aws-v1.aHR0cHM6Ly9zdHMuYXAtbm9ydGhlYXN0LTIuYW1hem9uYXdzLmNvbS8_QWN0aW9uPUdldENhbGxlcklkZW50aXR5JlZlcnNpb249MjAxMS0wNi0xNSZYLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFKMjVNVjJSVVZQNlRWTURBJTJGMjAxOTAzMjglMkZhcC1ub3J0aGVhc3QtMiUyRnN0cyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMTkwMzI4VDA3NDEwNVomWC1BbXotRXhwaXJlcz0wJlgtQW16LVNpZ25lZEhlYWRlcnM9aG9zdCUzQngtazhzLWF3cy1pZCZYLUFtei1TaWduYXR1cmU9Yjc0NzkzYzUwOTU5NDYwMzMxMjY2YjExYWY4ODBkM2Q2OWQ5MWRhYzFhZWY1NjZmZTAwNTNlNWY2MTM0NGFlZQ\n")),(0,r.kt)("p",null,"\uadf8\ub0e5 localhost:8080 \uc73c\ub85c\ub9cc \uc811\uc18d\ud558\uba74 \uad6c\uc131\ub41c \ud074\ub7ec\uc2a4\ud130 kube API list\ub97c \ud655\uc778\ub418\ubbc0\ub85c \uc544\ub798 \uacbd\ub85c\ub85c \uc811\uc18d\ud55c\ub2e4.",(0,r.kt)("br",{parentName:"p"}),"\n","\uc704\uc5d0\uc11c \ucd9c\ub825\ub41c TOKEN\uac12\uc73c\ub85c \ub85c\uadf8\uc778\ud55c\ub2e4. Token \uc138\uc158 Timeout\uc774 \uc788\uc73c\ub2c8 \uc138\uc158\ub9cc\ub8cc\uc2dc ",(0,r.kt)("inlineCode",{parentName:"p"},"aws-iam-authenticator")," \uba85\ub839\uc744 \ud1b5\ud574 \uac31\uc2e0\uac12\uc744 \uc785\ub825\ud558\uba74 \ub41c\ub2e4.  "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"http://localhost:8080/api/v1/namespaces/kube-system/services/https:kubernetes-dashboard:/proxy/#!/login\n")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"dashboard",src:a(94207).Z,width:"1950",height:"1118"})),(0,r.kt)("h2",{id:"microservice-app-\ubc30\ud3ec"},"Microservice app \ubc30\ud3ec"),(0,r.kt)("p",null,"\uac00\uc7a5 \uae30\ubcf8\uc801\uc778 ",(0,r.kt)("a",{parentName:"p",href:"https://microservices-demo.github.io/"},"Sock Shop"),"\uc744 \ubc30\ud3ec\ud558\uae30 \uc704\ud574 Git Clone \uc218\ud589"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ git clone https://github.com/microservices-demo/microservices-demo.git sockshop\n$ cd sockshop/deploy/kubernetes\n")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"NodePort"),"\ub85c \ub418\uc5b4\uc788\ub294 Front-End Service\ub97c ",(0,r.kt)("inlineCode",{parentName:"p"},"LoadBalancer"),"\ub85c \uc218\uc815\ud55c\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ sed -i 's/NodePort/LoadBalancer/g' complete-demo.yaml\n$ cat complete-demo.yaml | grep LoadBalancer\n type: LoadBalancer\n")),(0,r.kt)("p",null,"namespace \uc0dd\uc131 \ubc0f sock-shop \ubc30\ud3ec"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ kubectl create namespace sock-shop\n$ kubectl apply -f complete-demo.yaml\n$ kubectl get all\n")),(0,r.kt)("p",null,"\uc11c\ube44\uc2a4 \uc811\uc18d\ud655\uc778\uc744 \uc704\ud574\uc11c\ub294 ALB\ubc30\ud3ec\uc2dc\uac04(DNS\uc804\ud30c)\uc774 \uc77c\uc815 \uc18c\uc694\ub418\ubbc0\ub85c \uc7a0\uc2dc\ud6c4 \uc811\uc18d\uc744 \uc2dc\ub3c4\ud55c\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ kubectl get svc\nNAME           TYPE           CLUSTER-IP       EXTERNAL-IP                                                                 PORT(S)        AGE\ncarts          ClusterIP      10.100.84.58     <none>                                                                      80/TCP         1h\ncarts-db       ClusterIP      10.100.227.156   <none>                                                                      27017/TCP      1h\ncatalogue      ClusterIP      10.100.206.52    <none>                                                                      80/TCP         1h\ncatalogue-db   ClusterIP      10.100.119.66    <none>                                                                      3306/TCP       1h\nfront-end      LoadBalancer   10.100.249.164   a4c42cfe951be11e9bb8c0a8cd8a2e5d-8156023.ap-northeast-2.elb.amazonaws.com   80:30001/TCP   1h\norders         ClusterIP      10.100.160.17    <none>                                                                      80/TCP         1h\norders-db      ClusterIP      10.100.70.203    <none>                                                                      27017/TCP      1h\npayment        ClusterIP      10.100.57.233    <none>                                                                      80/TCP         1h\nqueue-master   ClusterIP      10.100.146.109   <none>                                                                      80/TCP         1h\nrabbitmq       ClusterIP      10.100.32.115    <none>                                                                      5672/TCP       1h\nshipping       ClusterIP      10.100.180.174   <none>                                                                      80/TCP         1h\nuser           ClusterIP      10.100.211.41    <none>                                                                      80/TCP         1h\nuser-db        ClusterIP      10.100.87.142    <none>                                                                      27017/TCP      1h\n")),(0,r.kt)("p",null,"\ube0c\ub77c\uc6b0\uc800\uc5d0\uc11c ALB\uc8fc\uc18c ",(0,r.kt)("inlineCode",{parentName:"p"},"a4c42cfe951be11e9bb8c0a8cd8a2e5d-8156023.ap-northeast-2.elb.amazonaws.com")," \ub85c \uc811\uc18d\ud558\uc5ec sock-shop Demo Web\uc744 \ud655\uc778\ud560\uc218 \uc788\ub2e4.  "),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"sockshop",src:a(20636).Z,width:"719",height:"800"})),(0,r.kt)("h2",{id:"eks-\ud074\ub7ec\uc2a4\ud130-\ubc0f-\uc0ad\uc81c"},"EKS \ud074\ub7ec\uc2a4\ud130 \ubc0f \uc0ad\uc81c"),(0,r.kt)("p",null,"\uc704\uc5d0\uc11c \uc678\ubd80\uc811\uc18d\uc744 \uc704\ud574 LoadBalancer\ub97c \uc218\ub3d9\uc73c\ub85c \uc124\uc815\ud558\uc600\uc73c\ubbc0\ub85c EC2 - Load Balancer\uc11c \ud504\ub85c\ube44\uc800\ub2dd\ub41c ALB\ub97c \uc0ad\uc81c\ud558\uace0 \uc9c4\ud589\ud574\uc57c \ud55c\ub2e4.  "),(0,r.kt)("p",null,"\ud074\ub7ec\uc2a4\ud130\uc5d0\uc11c \uc2e4\ud589 \uc911\uc778 \ubaa8\ub4e0 \uc11c\ube44\uc2a4\ub97c \ub2e4\uc2dc \ud655\uc778\ud558\uace0 EXTERNAL-IP\uac12\uacfc \uc5f0\uacb0\ub41c \ubaa8\ub4e0 \uc11c\ube44\uc2a4\ub97c \uc0ad\uc81c\ud55c\ub2e4.  "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ kubectl get svc --all-namespaces\n$ kubectl delete svc front-end\n")),(0,r.kt)("p",null,"ALB\uc640 VPC \uc0ad\uc81c\uac00 \uc644\ub8cc\ub41c\uac83\uc744 \ud655\uc778\ud558\uace0 \ud074\ub7ec\uc2a4\ud130\ub97c \uc0ad\uc81c\ud558\uc790.  "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'$ eksctl delete cluster --name=eksworkshop-eksctl\n[\u2139]  deleting EKS cluster "eksworkshop-eksctl"\n[\u2139]  will delete stack "eksctl-eksworkshop-eksctl-nodegroup-ng-3af535b7"\n[\u2139]  waiting for stack "eksctl-eksworkshop-eksctl-nodegroup-ng-3af535b7" to get deleted\n[\u2139]  will delete stack "eksctl-eksworkshop-eksctl-cluster"\n[\u2714]  kubeconfig has been updated\n[\u2714]  the following EKS cluster resource(s) for "eksworkshop-eksctl" will be deleted: cluster. If in doubt, check CloudFormation console\n')),(0,r.kt)("h2",{id:"\uc815\ub9ac"},"\uc815\ub9ac"),(0,r.kt)("p",null,"\uc11c\uc6b8 \ub9ac\uc804(ap-northeast-2)\uc5d0 EKS\uac00 \uc624\ud508\ub418\uace0 Production\ud658\uacbd\uc744 EKS\ub85c \ub118\uc5b4\uac00\ub294 \uae30\uc5c5\ub4e4\uc774 \ub9ce\uc544\uc9c0\uace0 \uc788\ub294\uac74 \uc544\uc8fc \uae0d\uc815\uc801\uc778 \ud604\uc0c1\uc774\ub2e4.",(0,r.kt)("br",{parentName:"p"}),"\n","\ub610\ud55c \uc5c4\uccad\ub09c \uc18d\ub3c4\uc758 \uae30\uc220\uac1c\ubc1c\uacfc \ub2e4\uc591\ud55c \ud234\ub4e4\ub85c Kubernetes Cluster\ub97c \uad6c\uc131\ud558\uac70\ub098 Microservice\ud615\ud0dc\uc758 App\uc744 \ubc30\ud3ec\ud558\ub294\uac83\uc740 \uc810\uc810 \ub300\uc911\ud654 \ub418\uc5b4\uac00\uace0 \uc788\ub2e4.",(0,r.kt)("br",{parentName:"p"}),"\n","\uc2e4\uc81c Production\uc5d0\uc11c \uad6c\ud604\uc744 \ud558\uae30 \uc704\ud574\uc11c\ub294 \ubcf4\uc548 \ubc0f \uc131\ub2a5\uc744 \ub3d9\uc2dc\uc5d0 \uace0\ub824\ud55c \ub124\ud2b8\uc6cc\ud06c(CNI), Ingress \uc124\uc815\uc774\ub098 \uc804\uccb4 \ud074\ub7ec\uc2a4\ud130 \ud37c\ud3ec\uba3c\uc2a4 \uce21\uba74\uc5d0\uc11c\uc758 \ud30c\ub77c\ubbf8\ud130 \ud29c\ub2dd\uc774 \ub354\uc6b1 \ub354 \uc911\uc694\ud574\uc9c0\uace0 \uad00\ub828\ub41c DevOps(SRE) \uc778\ub825\ub4e4\uc758 \uc911\uc694\ub3c4\uac00 \ub192\uc544\uc9c8\uac83\uc740 \ubd84\uba85\ud574 \ubcf4\uc778\ub2e4.  "),(0,r.kt)("p",null,"EKS\ub97c \uc624\ud508\uc18c\uc2a4 \uce21\uba74\uc5d0\uc11c \uace0\ub824\ud588\uc744\ub54c\uc5d0\ub294 \uc608\uc804\uc5d0 \ud398\uc774\uc2a4\ubd81\uc774\ub098 \ub2e4\ub978\uacf3\uc5d0\uc11c \uc885\uc885 \uc774\uc57c\uae30 \ud588\ub358\uac83\ucc98\ub7fc AWS \uace0\uc720\uc758 Lock-in \uc804\ub7b5\uc744 \uc5c4\uccad\ub098\uac8c \uace0\ubbfc\ud558\uace0 \ubc1c\ud45c\ud55c\ub4ef\ud55c \uc0dd\uac01\uc774 \ud55c \ub290\ub08c\uc744 \uc9c0\uc6b8\uc218\ub294 \uc5c6\ub294\uac74 \uc0ac\uc2e4\uc774\uc9c0\ub9cc \ud6cc\ub96d\ud55c \uc81c\ud488\uc778\uac74 \ud655\uc2e4\ud558\uace0 \ub2e8\uae30\uac04\uc5d0 \uc11c\ube44\uc2a4 \uc131\uc7a5\uc18d\ub3c4\ub97c \ub0bc \uc218 \uc788\ub294 \uc11c\ube44\uc2a4\ub77c \uc0dd\uac01\ud55c\ub2e4.  "),(0,r.kt)("p",null,"\ub9c8\uc9c0\ub9c9\uc73c\ub85c Managed Kubernetes\uc758 \uc120\ud0dd\uc740 \uc5d4\uc9c0\ub2c8\uc5b4\uc758 \ubaab\uc73c\ub85c \ubcf4\uace0 \uac01 \ubca4\ub354\ubcc4 \ube44\uad50\ud55c \uc544\ub798 \ub9c1\ud06c\ub97c \ucc38\uc870\ud574\uc11c \uc120\uc815 \uae30\uc900\uc744 \uc7a1\uc73c\uba74 \ub354\uc6b1 \uc88b\uc744\uac83 \uac19\ub2e4.",(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("a",{parentName:"p",href:"https://docs.google.com/spreadsheets/d/1U0x4-NQegEPGM7eVTKJemhkPy18LWuHW5vX8uZzqzYo/edit#gid=0"},"https://docs.google.com/spreadsheets/d/1U0x4-NQegEPGM7eVTKJemhkPy18LWuHW5vX8uZzqzYo/edit#gid=0")))}m.isMDXComponent=!0},94207:function(e,t,a){t.Z=a.p+"assets/images/k8s_dashboard-b1c80ac04a6d1ec9d73b613952ef37c1.png"},20636:function(e,t,a){t.Z=a.p+"assets/images/sock-shop-42ee8cb05cf4ad155e4890fd1370a6d8.png"}}]);